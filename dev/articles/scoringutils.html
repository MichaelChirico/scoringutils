<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="scoringutils">
<title>Getting started • scoringutils</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started">
<meta property="og:description" content="scoringutils">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">scoringutils</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/scoringutils.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/metric-details.html">Details on the metrics implemented in `scoringutils`</a>
    <a class="dropdown-item" href="../articles/scoring-forecasts-directly.html">Scoring forecasts directly</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiforecasts/scoringutils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting started</h1>
                        <h4 data-toc-skip class="author">Nikos
Bosse</h4>
            
            <h4 data-toc-skip class="date">2024-02-28</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/scoringutils/blob/HEAD/vignettes/scoringutils.Rmd" class="external-link"><code>vignettes/scoringutils.Rmd</code></a></small>
      <div class="d-none name"><code>scoringutils.Rmd</code></div>
    </div>

    
    
<p>The <code>scoringutils</code> package provides a collection of
metrics and proper scoring rules that make it simple to score
probabilistic forecasts against observed values. You can find more
information in the paper <a href="https://arxiv.org/abs/2205.07090" class="external-link">Evaluating Forecasts with
scoringutils in R</a> as well as the <a href="https://epiforecasts.io/scoringutils/articles/metric-details.html">Metrics-Vignette</a>
and the <a href="https://epiforecasts.io/scoringutils/articles/scoring-forecasts-directly.html">Scoring
forecasts directly Vignette</a>.</p>
<p>The <code>scoringutils</code> package offers convenient automated
forecast evaluation in a <code>data.table</code> format (using the
function <code><a href="../reference/score.html">score()</a></code>), but also provides experienced users with
a set of reliable lower-level scoring metrics operating on
vectors/matriced they can build upon in other applications. In addition
it implements a wide range of flexible plots that are able to cover many
use cases.</p>
<p>The goal of this package is to provide a tested and reliable
collection of metrics that can be used for scoring probabilistic
forecasts (forecasts with a full predictive distribution, rather than
point forecasts). It has a much stronger focus on convenience than
e.g. the <code>scoringRules</code> package, which provides a
comprehensive collection of proper scoring rules (also used in
<code>scoringutils</code>). In contrast to other packages,
<code>scoringutils</code> offers functionality to automatically evaluate
forecasts, to visualise scores and to obtain relative scores between
models.</p>
<p>Predictions can be handled in various formats:
<code>scoringutils</code> can handle probabilistic forecasts in either a
sample based or a quantile based format. For more detail on the expected
input formats please see below. True values can be integer, continuous
or binary.</p>
<div class="section level2">
<h2 id="input-formats">Input formats<a class="anchor" aria-label="anchor" href="#input-formats"></a>
</h2>
<p>Most of the time, the <code><a href="../reference/score.html">score()</a></code> function will be able to
do the entire evaluation for you. All you need to do is to pass in a
<code>data.frame</code> with the appropriate columns. Which columns are
required depends on the format the forecasts come in. The forecast
format can either be based on quantiles (see
<code>example_quantile</code> for the expected format), based on
predictive samples (see <code>example_continuous</code> and
<code>example_integer</code> for the expected format in each case) or in
a binary format. The following table gives an overview (pairwise
comparisons will be explained in more detail below):</p>
<table class="table">
<thead><tr class="header">
<th align="left">Format</th>
<th align="left">Required columns</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">quantile-based</td>
<td align="left">‘observed’, ‘predicted’, ‘quantile’</td>
</tr>
<tr class="even">
<td align="left">sample-based</td>
<td align="left">‘observed’, ‘predicted’, ‘sample’</td>
</tr>
<tr class="odd">
<td align="left">binary</td>
<td align="left">‘observed’, ‘predicted’</td>
</tr>
<tr class="even">
<td align="left">pairwise-comparisons</td>
<td align="left">additionally a column ‘model’</td>
</tr>
</tbody>
</table>
<p>Additional columns may be present to indicate a grouping of
forecasts. For example, we could have forecasts made by different models
in various locations at different time points, each for several weeks
into the future. <code>scoringutils</code> automatically tries to
determine the <em>unit of a single forecast</em>, i.e. the combination
of existing columns that are able to uniquely identify a single
forecast. It uses all existing columns for this, which can sometimes
lead to issues. We therefore recommend using the function
<code><a href="../reference/set_forecast_unit.html">set_forecast_unit()</a></code> to determine the forecast unit
manually. The function simply drops unneeded columns, while making sure
that some necessary, ‘protected columns’ like “predicted” or “observed”
are retained.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">example_quantile</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "location"        "target_end_date" "target_type"     "observed"       </span></span>
<span><span class="co">#&gt;  [5] "location_name"   "forecast_date"   "quantile_level"  "predicted"      </span></span>
<span><span class="co">#&gt;  [9] "model"           "horizon"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/set_forecast_unit.html">set_forecast_unit</a></span><span class="op">(</span></span>
<span>  <span class="va">example_quantile</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"location"</span>, <span class="st">"target_end_date"</span>, <span class="st">"target_type"</span>, <span class="st">"horizon"</span>, <span class="st">"model"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "observed"        "quantile_level"  "predicted"       "location"       </span></span>
<span><span class="co">#&gt; [5] "target_end_date" "target_type"     "horizon"         "model"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="constructing-a-forecast-object">Constructing a forecast object<a class="anchor" aria-label="anchor" href="#constructing-a-forecast-object"></a>
</h2>
<p>The function <code><a href="../reference/as_forecast.html">as_forecast()</a></code> is be used to construct a
forecast object and check the input data. It determines the forecast
type, creates an object of the appropriate class
(<code>forecast_binary</code>, <code>forecast_quantile</code> or
<code>forecast_sample</code>), and validates the input data. Objects of
class <code>forecast_*</code> have a print method that provides
additional information.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_quantile</span><span class="op">)</span></span>
<span><span class="co">#&gt; Key: &lt;location, target_end_date, target_type&gt;</span></span>
<span><span class="co">#&gt;    location target_end_date target_type observed location_name forecast_date</span></span>
<span><span class="co">#&gt;      &lt;char&gt;          &lt;Date&gt;      &lt;char&gt;    &lt;num&gt;        &lt;char&gt;        &lt;Date&gt;</span></span>
<span><span class="co">#&gt; 1:       DE      2021-01-02       Cases   127300       Germany          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:       DE      2021-01-02      Deaths     4534       Germany          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:       DE      2021-01-09       Cases   154922       Germany          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:       DE      2021-01-09      Deaths     6117       Germany          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:       DE      2021-01-16       Cases   110183       Germany          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:       DE      2021-01-16      Deaths     5867       Germany          &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    quantile_level predicted  model horizon</span></span>
<span><span class="co">#&gt;             &lt;num&gt;     &lt;int&gt; &lt;char&gt;   &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:             NA        NA   &lt;NA&gt;      NA</span></span>
<span><span class="co">#&gt; 2:             NA        NA   &lt;NA&gt;      NA</span></span>
<span><span class="co">#&gt; 3:             NA        NA   &lt;NA&gt;      NA</span></span>
<span><span class="co">#&gt; 4:             NA        NA   &lt;NA&gt;      NA</span></span>
<span><span class="co">#&gt; 5:             NA        NA   &lt;NA&gt;      NA</span></span>
<span><span class="co">#&gt; 6:             NA        NA   &lt;NA&gt;      NA</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecast_quantile</span> <span class="op">&lt;-</span> <span class="va">example_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_forecast_unit.html">set_forecast_unit</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"location"</span>, <span class="st">"target_end_date"</span>, <span class="st">"forecast_date"</span>,</span>
<span>      <span class="st">"target_type"</span>, <span class="st">"horizon"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/as_forecast.html">as_forecast</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span>
<span></span>
<span><span class="va">forecast_quantile</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span>
<span><span class="co">#&gt; Forecast type:</span></span>
<span><span class="co">#&gt; [1] "quantile"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Forecast unit:</span></span>
<span><span class="co">#&gt; [1] "model"           "location"        "target_end_date" "forecast_date"  </span></span>
<span><span class="co">#&gt; [5] "target_type"     "horizon"        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Key: &lt;location, target_end_date, target_type&gt;</span></span>
<span><span class="co">#&gt;        observed quantile_level predicted                model location</span></span>
<span><span class="co">#&gt;           &lt;num&gt;          &lt;num&gt;     &lt;int&gt;               &lt;char&gt;   &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1:   127300             NA        NA                 &lt;NA&gt;       DE</span></span>
<span><span class="co">#&gt;     2:     4534             NA        NA                 &lt;NA&gt;       DE</span></span>
<span><span class="co">#&gt;     3:   154922             NA        NA                 &lt;NA&gt;       DE</span></span>
<span><span class="co">#&gt;     4:     6117             NA        NA                 &lt;NA&gt;       DE</span></span>
<span><span class="co">#&gt;     5:   110183             NA        NA                 &lt;NA&gt;       DE</span></span>
<span><span class="co">#&gt;    ---                                                                </span></span>
<span><span class="co">#&gt; 20541:       78          0.850       352 epiforecasts-EpiNow2       IT</span></span>
<span><span class="co">#&gt; 20542:       78          0.900       397 epiforecasts-EpiNow2       IT</span></span>
<span><span class="co">#&gt; 20543:       78          0.950       499 epiforecasts-EpiNow2       IT</span></span>
<span><span class="co">#&gt; 20544:       78          0.975       611 epiforecasts-EpiNow2       IT</span></span>
<span><span class="co">#&gt; 20545:       78          0.990       719 epiforecasts-EpiNow2       IT</span></span>
<span><span class="co">#&gt;        target_end_date forecast_date target_type horizon</span></span>
<span><span class="co">#&gt;                 &lt;Date&gt;        &lt;Date&gt;      &lt;char&gt;   &lt;num&gt;</span></span>
<span><span class="co">#&gt;     1:      2021-01-02          &lt;NA&gt;       Cases      NA</span></span>
<span><span class="co">#&gt;     2:      2021-01-02          &lt;NA&gt;      Deaths      NA</span></span>
<span><span class="co">#&gt;     3:      2021-01-09          &lt;NA&gt;       Cases      NA</span></span>
<span><span class="co">#&gt;     4:      2021-01-09          &lt;NA&gt;      Deaths      NA</span></span>
<span><span class="co">#&gt;     5:      2021-01-16          &lt;NA&gt;       Cases      NA</span></span>
<span><span class="co">#&gt;    ---                                                  </span></span>
<span><span class="co">#&gt; 20541:      2021-07-24    2021-07-12      Deaths       2</span></span>
<span><span class="co">#&gt; 20542:      2021-07-24    2021-07-12      Deaths       2</span></span>
<span><span class="co">#&gt; 20543:      2021-07-24    2021-07-12      Deaths       2</span></span>
<span><span class="co">#&gt; 20544:      2021-07-24    2021-07-12      Deaths       2</span></span>
<span><span class="co">#&gt; 20545:      2021-07-24    2021-07-12      Deaths       2</span></span></code></pre></div>
<p>If you are unsure what your input data should look like, have a look
at the <code>example_quantile</code>, <code>example_integer</code>,
<code>example_continuous</code> and <code>example_binary</code> data
sets provided in the package.</p>
<p>The output of <code><a href="../reference/as_forecast.html">as_forecast()</a></code> can later be directly used
as input to <code><a href="../reference/score.html">score()</a></code>. This is the recommended workflow
(however, <code><a href="../reference/score.html">score()</a></code> will run <code><a href="../reference/as_forecast.html">as_forecast()</a></code>
internally if this hasn’t happened before).</p>
<p>Note that in the above example some columns contain duplicated
information with regards to the forecast unit, e.g. “location” and
“location_name”, and can be dropped. If we drop essential information,
for example, the “target_type” column, we’ll get an error informing us
that the forecasts aren’t uniquely identified any more.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_forecast_unit.html">set_forecast_unit</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"location"</span>, <span class="st">"target_end_date"</span>,</span>
<span>      <span class="st">"forecast_date"</span>, <span class="st">"model"</span>, <span class="st">"horizon"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/as_forecast.html">as_forecast</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: Assertion on 'data' failed: There are instances with more than one forecast for the same target. This can't be right and needs to be resolved. Maybe you need to check the unit of a single forecast and add missing columns? Use the function get_duplicate_forecasts() to identify duplicate rows.</span></span></code></pre></div>
<p>The function <code><a href="../reference/get_duplicate_forecasts.html">get_duplicate_forecasts()</a></code> may help to
investigate the issue. When filtering for only a single quantile of the
EuroCOVIDhub-ensemble, we can see that there are indeed two forecasts
for every date, location and horizon.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">duplicates</span> <span class="op">&lt;-</span> <span class="va">example_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_forecast_unit.html">set_forecast_unit</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"location"</span>, <span class="st">"target_end_date"</span>,</span>
<span>      <span class="st">"forecast_date"</span>, <span class="st">"model"</span>, <span class="st">"horizon"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/get_duplicate_forecasts.html">get_duplicate_forecasts</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">duplicates</span><span class="op">[</span><span class="va">quantile_level</span> <span class="op">==</span> <span class="fl">0.5</span> <span class="op">&amp;</span> <span class="va">model</span> <span class="op">==</span> <span class="st">"EuroCOVIDhub-ensemble"</span>, <span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Key: &lt;location, target_end_date&gt;</span></span>
<span><span class="co">#&gt;    observed quantile_level predicted location target_end_date forecast_date</span></span>
<span><span class="co">#&gt;       &lt;num&gt;          &lt;num&gt;     &lt;int&gt;   &lt;char&gt;          &lt;Date&gt;        &lt;Date&gt;</span></span>
<span><span class="co">#&gt; 1:   106987            0.5    119258       DE      2021-05-08    2021-05-03</span></span>
<span><span class="co">#&gt; 2:     1582            0.5      1568       DE      2021-05-08    2021-05-03</span></span>
<span><span class="co">#&gt; 3:    64985            0.5    110716       DE      2021-05-15    2021-05-03</span></span>
<span><span class="co">#&gt; 4:    64985            0.5     92649       DE      2021-05-15    2021-05-10</span></span>
<span><span class="co">#&gt; 5:     1311            0.5      1521       DE      2021-05-15    2021-05-03</span></span>
<span><span class="co">#&gt; 6:     1311            0.5      1422       DE      2021-05-15    2021-05-10</span></span>
<span><span class="co">#&gt;                    model horizon</span></span>
<span><span class="co">#&gt;                   &lt;char&gt;   &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: EuroCOVIDhub-ensemble       1</span></span>
<span><span class="co">#&gt; 2: EuroCOVIDhub-ensemble       1</span></span>
<span><span class="co">#&gt; 3: EuroCOVIDhub-ensemble       2</span></span>
<span><span class="co">#&gt; 4: EuroCOVIDhub-ensemble       1</span></span>
<span><span class="co">#&gt; 5: EuroCOVIDhub-ensemble       2</span></span>
<span><span class="co">#&gt; 6: EuroCOVIDhub-ensemble       1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="showing-available-forecasts">Showing available forecasts<a class="anchor" aria-label="anchor" href="#showing-available-forecasts"></a>
</h2>
<p>The function <code><a href="../reference/get_forecast_counts.html">get_forecast_counts()</a></code> may also be helpful
to determine where forecasts are available. Using the <code>by</code>
argument you can specify the level of summary. For example, to see how
many forecasts there are per model and target_type, we can run</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_forecast_counts.html">get_forecast_counts</a></span><span class="op">(</span><span class="va">forecast_quantile</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"target_type"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span>
<span><span class="co">#&gt; Key: &lt;model, target_type&gt;</span></span>
<span><span class="co">#&gt;                    model target_type count</span></span>
<span><span class="co">#&gt;                   &lt;char&gt;      &lt;char&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1: EuroCOVIDhub-baseline       Cases   128</span></span>
<span><span class="co">#&gt; 2: EuroCOVIDhub-baseline      Deaths   128</span></span>
<span><span class="co">#&gt; 3: EuroCOVIDhub-ensemble       Cases   128</span></span>
<span><span class="co">#&gt; 4: EuroCOVIDhub-ensemble      Deaths   128</span></span>
<span><span class="co">#&gt; 5:       UMass-MechBayes       Cases     0</span></span>
<span><span class="co">#&gt; 6:       UMass-MechBayes      Deaths   128</span></span>
<span><span class="co">#&gt; 7:  epiforecasts-EpiNow2       Cases   128</span></span>
<span><span class="co">#&gt; 8:  epiforecasts-EpiNow2      Deaths   119</span></span></code></pre></div>
<p>We see that ‘epiforecasts-EpiNow2’ has some missing forecasts for the
deaths forecast target and that UMass-MechBayes has no case
forecasts.</p>
<p>This information can also be visualised using
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecast_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/get_forecast_counts.html">get_forecast_counts</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"forecast_date"</span>, <span class="st">"target_type"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_forecast_counts.html">plot_forecast_counts</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"forecast_date"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">target_type</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span></code></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-8-1.png" width="1056"></p>
<p>You can also visualise forecasts directly using the
<code><a href="../reference/plot_predictions.html">plot_predictions()</a></code> function:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecast_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/make_NA.html">make_NA</a></span><span class="op">(</span></span>
<span>    what <span class="op">=</span> <span class="st">"truth"</span>,</span>
<span>    <span class="va">target_end_date</span> <span class="op">&gt;=</span> <span class="st">"2021-07-15"</span>,</span>
<span>    <span class="va">target_end_date</span> <span class="op">&lt;</span> <span class="st">"2021-05-22"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/make_NA.html">make_NA</a></span><span class="op">(</span></span>
<span>    what <span class="op">=</span> <span class="st">"forecast"</span>,</span>
<span>    <span class="va">model</span> <span class="op">!=</span> <span class="st">"EuroCOVIDhub-ensemble"</span>,</span>
<span>    <span class="va">forecast_date</span> <span class="op">!=</span> <span class="st">"2021-06-28"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_predictions.html">plot_predictions</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"target_end_date"</span>,</span>
<span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"target_type"</span>, <span class="st">"location"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="va">target_type</span> <span class="op">~</span> <span class="va">location</span>, ncol <span class="op">=</span> <span class="fl">4</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span></span></code></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-9-1.png" width="864"></p>
</div>
<div class="section level2">
<h2 id="scoring-and-summarising-forecasts">Scoring and summarising forecasts<a class="anchor" aria-label="anchor" href="#scoring-and-summarising-forecasts"></a>
</h2>
<p>Forecasts can easily be scored using the <code><a href="../reference/score.html">score()</a></code>
function.</p>
<p>For clarity, we suggest setting the forecast unit explicitly and
calling <code><a href="../reference/as_forecast.html">as_forecast()</a></code> explicitly.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scores</span> <span class="op">&lt;-</span> <span class="va">forecast_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">scores</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt;                      model location target_end_date forecast_date target_type</span></span>
<span><span class="co">#&gt;                     &lt;char&gt;   &lt;char&gt;          &lt;Date&gt;        &lt;Date&gt;      &lt;char&gt;</span></span>
<span><span class="co">#&gt;   1: EuroCOVIDhub-ensemble       DE      2021-05-08    2021-05-03       Cases</span></span>
<span><span class="co">#&gt;   2: EuroCOVIDhub-baseline       DE      2021-05-08    2021-05-03       Cases</span></span>
<span><span class="co">#&gt;  ---                                                                         </span></span>
<span><span class="co">#&gt; 886:  epiforecasts-EpiNow2       IT      2021-07-24    2021-07-05      Deaths</span></span>
<span><span class="co">#&gt; 887:  epiforecasts-EpiNow2       IT      2021-07-24    2021-07-12      Deaths</span></span>
<span><span class="co">#&gt;      horizon         wis overprediction underprediction dispersion  bias</span></span>
<span><span class="co">#&gt;        &lt;num&gt;       &lt;num&gt;          &lt;num&gt;           &lt;num&gt;      &lt;num&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt;   1:       1  7990.85478    2549.869565               0 5440.98522  0.50</span></span>
<span><span class="co">#&gt;   2:       1 16925.04696   15275.826087               0 1649.22087  0.95</span></span>
<span><span class="co">#&gt;  ---                                                                    </span></span>
<span><span class="co">#&gt; 886:       3    19.76261       5.478261               0   14.28435  0.50</span></span>
<span><span class="co">#&gt; 887:       2    66.16174      40.608696               0   25.55304  0.90</span></span>
<span><span class="co">#&gt;      interval_coverage_50 interval_coverage_90 interval_coverage_deviation</span></span>
<span><span class="co">#&gt;                    &lt;lgcl&gt;               &lt;lgcl&gt;                       &lt;num&gt;</span></span>
<span><span class="co">#&gt;   1:                 TRUE                 TRUE                  0.05181818</span></span>
<span><span class="co">#&gt;   2:                FALSE                FALSE                 -0.40272727</span></span>
<span><span class="co">#&gt;  ---                                                                      </span></span>
<span><span class="co">#&gt; 886:                 TRUE                 TRUE                  0.05181818</span></span>
<span><span class="co">#&gt; 887:                FALSE                 TRUE                 -0.31181818</span></span>
<span><span class="co">#&gt;      ae_median</span></span>
<span><span class="co">#&gt;          &lt;num&gt;</span></span>
<span><span class="co">#&gt;   1:     12271</span></span>
<span><span class="co">#&gt;   2:     25620</span></span>
<span><span class="co">#&gt;  ---          </span></span>
<span><span class="co">#&gt; 886:        26</span></span>
<span><span class="co">#&gt; 887:       108</span></span></code></pre></div>
<p>The function <code><a href="../reference/score.html">score()</a></code> returns unsumarised scores, which
in most cases is not what the user wants. It returns a single score per
forecast (as determined by the forecast unit).</p>
<p>A second function, <code><a href="../reference/summarise_scores.html">summarise_scores()</a></code> takes care of
summarising these scores to the level specified by the user. The
<code>by</code> argument can be used to define the level of summary. By
default, <code>by = model</code> and one score per model is returned.
Through the <code>by</code> argument we can specify what unit of summary
we want. We can also call <code>sumarise_scores()</code> multiple tines,
e.g to round your outputs by specifying e.g. <code><a href="https://rdrr.io/r/base/Round.html" class="external-link">signif()</a></code> as a
summary function.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scores</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"target_type"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">signif</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="3%">
<col width="9%">
<col width="10%">
<col width="6%">
<col width="5%">
<col width="13%">
<col width="13%">
<col width="17%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">model</th>
<th align="right">wis</th>
<th align="right">overprediction</th>
<th align="right">underprediction</th>
<th align="right">dispersion</th>
<th align="right">bias</th>
<th align="right">interval_coverage_50</th>
<th align="right">interval_coverage_90</th>
<th align="right">interval_coverage_deviation</th>
<th align="right">ae_median</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">EuroCOVIDhub-ensemble</td>
<td align="right">18000</td>
<td align="right">10000.0</td>
<td align="right">4200.0</td>
<td align="right">3700</td>
<td align="right">-0.0560</td>
<td align="right">0.39</td>
<td align="right">0.80</td>
<td align="right">-0.100</td>
<td align="right">24000</td>
</tr>
<tr class="even">
<td align="left">EuroCOVIDhub-ensemble</td>
<td align="right">41</td>
<td align="right">7.1</td>
<td align="right">4.1</td>
<td align="right">30</td>
<td align="right">0.0730</td>
<td align="right">0.88</td>
<td align="right">1.00</td>
<td align="right">0.200</td>
<td align="right">53</td>
</tr>
<tr class="odd">
<td align="left">EuroCOVIDhub-baseline</td>
<td align="right">28000</td>
<td align="right">14000.0</td>
<td align="right">10000.0</td>
<td align="right">4100</td>
<td align="right">0.0980</td>
<td align="right">0.33</td>
<td align="right">0.82</td>
<td align="right">-0.120</td>
<td align="right">38000</td>
</tr>
<tr class="even">
<td align="left">EuroCOVIDhub-baseline</td>
<td align="right">160</td>
<td align="right">66.0</td>
<td align="right">2.1</td>
<td align="right">91</td>
<td align="right">0.3400</td>
<td align="right">0.66</td>
<td align="right">1.00</td>
<td align="right">0.120</td>
<td align="right">230</td>
</tr>
<tr class="odd">
<td align="left">epiforecasts-EpiNow2</td>
<td align="right">21000</td>
<td align="right">12000.0</td>
<td align="right">3300.0</td>
<td align="right">5700</td>
<td align="right">-0.0790</td>
<td align="right">0.47</td>
<td align="right">0.79</td>
<td align="right">-0.070</td>
<td align="right">28000</td>
</tr>
<tr class="even">
<td align="left">epiforecasts-EpiNow2</td>
<td align="right">67</td>
<td align="right">19.0</td>
<td align="right">16.0</td>
<td align="right">32</td>
<td align="right">-0.0051</td>
<td align="right">0.42</td>
<td align="right">0.91</td>
<td align="right">-0.045</td>
<td align="right">100</td>
</tr>
<tr class="odd">
<td align="left">UMass-MechBayes</td>
<td align="right">53</td>
<td align="right">9.0</td>
<td align="right">17.0</td>
<td align="right">27</td>
<td align="right">-0.0220</td>
<td align="right">0.46</td>
<td align="right">0.88</td>
<td align="right">-0.025</td>
<td align="right">78</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="scoring-point-forecasts">Scoring point forecasts<a class="anchor" aria-label="anchor" href="#scoring-point-forecasts"></a>
</h3>
<p>Point forecasts can be scored in a separate format.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="va">example_point</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span>by <span class="op">=</span> <span class="st">"model"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;                    model    ae_point     se_point       ape</span></span>
<span><span class="co">#&gt;                   &lt;char&gt;       &lt;num&gt;        &lt;num&gt;     &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: EuroCOVIDhub-ensemble 12077.10156 1.945118e+09 0.2996696</span></span>
<span><span class="co">#&gt; 2: EuroCOVIDhub-baseline 19353.42969 2.883446e+09 0.7383936</span></span>
<span><span class="co">#&gt; 3:  epiforecasts-EpiNow2 14521.10526 2.680928e+09 0.3715552</span></span>
<span><span class="co">#&gt; 4:       UMass-MechBayes    78.47656 1.170976e+04 0.2823206</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adding-empirical-coverage">Adding empirical coverage<a class="anchor" aria-label="anchor" href="#adding-empirical-coverage"></a>
</h3>
<p>For quantile-based forecasts we are often interested in specific
coverage-levels, for example, what percentage of true values fell
between all 50% or the 90% prediction intervals. We can add this
information using the function <code><a href="../reference/add_coverage.html">add_coverage()</a></code>. This
function also requires a <code>by</code> argument which defines the
level of grouping for which the percentage of true values covered by
certain prediction intervals is computed.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="va">example_quantile</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"target_type"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">signif</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span>
<span><span class="co">#&gt;                    model   wis overprediction underprediction dispersion</span></span>
<span><span class="co">#&gt;                   &lt;char&gt; &lt;num&gt;          &lt;num&gt;           &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: EuroCOVIDhub-ensemble 18000        10000.0          4200.0       3700</span></span>
<span><span class="co">#&gt; 2: EuroCOVIDhub-ensemble    41            7.1             4.1         30</span></span>
<span><span class="co">#&gt; 3: EuroCOVIDhub-baseline 28000        14000.0         10000.0       4100</span></span>
<span><span class="co">#&gt; 4: EuroCOVIDhub-baseline   160           66.0             2.1         91</span></span>
<span><span class="co">#&gt; 5:  epiforecasts-EpiNow2 21000        12000.0          3300.0       5700</span></span>
<span><span class="co">#&gt; 6:  epiforecasts-EpiNow2    67           19.0            16.0         32</span></span>
<span><span class="co">#&gt; 7:       UMass-MechBayes    53            9.0            17.0         27</span></span>
<span><span class="co">#&gt;       bias interval_coverage_50 interval_coverage_90</span></span>
<span><span class="co">#&gt;      &lt;num&gt;                &lt;num&gt;                &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: -0.0560                 0.39                 0.80</span></span>
<span><span class="co">#&gt; 2:  0.0730                 0.88                 1.00</span></span>
<span><span class="co">#&gt; 3:  0.0980                 0.33                 0.82</span></span>
<span><span class="co">#&gt; 4:  0.3400                 0.66                 1.00</span></span>
<span><span class="co">#&gt; 5: -0.0790                 0.47                 0.79</span></span>
<span><span class="co">#&gt; 6: -0.0051                 0.42                 0.91</span></span>
<span><span class="co">#&gt; 7: -0.0220                 0.46                 0.88</span></span>
<span><span class="co">#&gt;    interval_coverage_deviation ae_median</span></span>
<span><span class="co">#&gt;                          &lt;num&gt;     &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:                      -0.100     24000</span></span>
<span><span class="co">#&gt; 2:                       0.200        53</span></span>
<span><span class="co">#&gt; 3:                      -0.120     38000</span></span>
<span><span class="co">#&gt; 4:                       0.120       230</span></span>
<span><span class="co">#&gt; 5:                      -0.070     28000</span></span>
<span><span class="co">#&gt; 6:                      -0.045       100</span></span>
<span><span class="co">#&gt; 7:                      -0.025        78</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adding-relative-scores">Adding relative scores<a class="anchor" aria-label="anchor" href="#adding-relative-scores"></a>
</h3>
<p>In order to better compare models against each other we can use
relative scores which are computed based on pairwise comparisons (see
details below). Relative scores can be added to the evaluation using the
function <code><a href="../reference/summarise_scores.html">summarise_scores()</a></code>. This requires a column called
‘model’ to be present. Pairwise comparisons are computed according to
the grouping specified in <code>by</code>: essentially, the data.frame
with all scores gets split into different data.frames according to the
values specified in <code>by</code> and relative scores are computed for
every individual group separately. The <code>baseline</code> argument
allows us to specify a baseline that can be used to scale relative
scores (all scores are divided by the baseline relative score). For
example, to obtain relative scores separately for different forecast
targets, we can run</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="va">example_quantile</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_pairwise_comparison.html">add_pairwise_comparison</a></span><span class="op">(</span></span>
<span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"target_type"</span><span class="op">)</span>,</span>
<span>    baseline <span class="op">=</span> <span class="st">"EuroCOVIDhub-ensemble"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"target_type"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span>
<span><span class="co">#&gt; Key: &lt;model, target_type&gt;</span></span>
<span><span class="co">#&gt;                    model target_type         wis overprediction underprediction</span></span>
<span><span class="co">#&gt;                   &lt;char&gt;      &lt;char&gt;       &lt;num&gt;          &lt;num&gt;           &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: EuroCOVIDhub-baseline       Cases 28483.57465   14096.100883    10284.972826</span></span>
<span><span class="co">#&gt; 2: EuroCOVIDhub-baseline      Deaths   159.40387      65.899117        2.098505</span></span>
<span><span class="co">#&gt; 3: EuroCOVIDhub-ensemble       Cases 17943.82383   10043.121943     4237.177310</span></span>
<span><span class="co">#&gt; 4: EuroCOVIDhub-ensemble      Deaths    41.42249       7.138247        4.103261</span></span>
<span><span class="co">#&gt; 5:       UMass-MechBayes      Deaths    52.65195       8.978601       16.800951</span></span>
<span><span class="co">#&gt; 6:  epiforecasts-EpiNow2       Cases 20831.55662   11906.823030     3260.355639</span></span>
<span><span class="co">#&gt; 7:  epiforecasts-EpiNow2      Deaths    66.64282      18.892583       15.893314</span></span>
<span><span class="co">#&gt;    dispersion        bias interval_coverage_50 interval_coverage_90</span></span>
<span><span class="co">#&gt;         &lt;num&gt;       &lt;num&gt;                &lt;num&gt;                &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: 4102.50094  0.09796875            0.3281250            0.8203125</span></span>
<span><span class="co">#&gt; 2:   91.40625  0.33906250            0.6640625            1.0000000</span></span>
<span><span class="co">#&gt; 3: 3663.52458 -0.05640625            0.3906250            0.8046875</span></span>
<span><span class="co">#&gt; 4:   30.18099  0.07265625            0.8750000            1.0000000</span></span>
<span><span class="co">#&gt; 5:   26.87239 -0.02234375            0.4609375            0.8750000</span></span>
<span><span class="co">#&gt; 6: 5664.37795 -0.07890625            0.4687500            0.7890625</span></span>
<span><span class="co">#&gt; 7:   31.85692 -0.00512605            0.4201681            0.9075630</span></span>
<span><span class="co">#&gt;    interval_coverage_deviation   ae_median wis_relative_skill</span></span>
<span><span class="co">#&gt;                          &lt;num&gt;       &lt;num&gt;              &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:                 -0.11721591 38473.60156          1.2947445</span></span>
<span><span class="co">#&gt; 2:                  0.12142045   233.25781          2.2958723</span></span>
<span><span class="co">#&gt; 3:                 -0.10230114 24101.07031          0.8156514</span></span>
<span><span class="co">#&gt; 4:                  0.20380682    53.13281          0.5966310</span></span>
<span><span class="co">#&gt; 5:                 -0.02488636    78.47656          0.7475873</span></span>
<span><span class="co">#&gt; 6:                 -0.06963068 27923.81250          0.9469157</span></span>
<span><span class="co">#&gt; 7:                 -0.04520244   104.74790          0.9765276</span></span>
<span><span class="co">#&gt;    wis_scaled_relative_skill</span></span>
<span><span class="co">#&gt;                        &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:                  1.587375</span></span>
<span><span class="co">#&gt; 2:                  3.848060</span></span>
<span><span class="co">#&gt; 3:                  1.000000</span></span>
<span><span class="co">#&gt; 4:                  1.000000</span></span>
<span><span class="co">#&gt; 5:                  1.253014</span></span>
<span><span class="co">#&gt; 6:                  1.160932</span></span>
<span><span class="co">#&gt; 7:                  1.636736</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="visualising-scores">Visualising scores<a class="anchor" aria-label="anchor" href="#visualising-scores"></a>
</h2>
<div class="section level3">
<h3 id="coloured-table">Coloured table<a class="anchor" aria-label="anchor" href="#coloured-table"></a>
</h3>
<p>A simple coloured table can be produced based on the scores:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="va">example_integer</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"target_type"</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"target_type"</span><span class="op">)</span>, fun <span class="op">=</span> <span class="va">signif</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_score_table.html">plot_score_table</a></span><span class="op">(</span>by <span class="op">=</span> <span class="st">"target_type"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">target_type</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span></code></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-15-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="score-heatmap">Score heatmap<a class="anchor" aria-label="anchor" href="#score-heatmap"></a>
</h3>
<p>We can also summarise one particular metric across different
categories using a simple heatmap:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="va">example_continuous</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"location"</span>, <span class="st">"target_type"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_heatmap.html">plot_heatmap</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"location"</span>, metric <span class="op">=</span> <span class="st">"bias"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">target_type</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span></code></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-16-1.png" width="1056"></p>
</div>
<div class="section level3">
<h3 id="weighted-interval-score-components">Weighted interval score components<a class="anchor" aria-label="anchor" href="#weighted-interval-score-components"></a>
</h3>
<p>The weighted interval score can be split up into three components:
Over-prediction, under-prediction and dispersion. These can be
visualised separately in the following way:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="va">example_quantile</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"target_type"</span>, <span class="st">"model"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_wis.html">plot_wis</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">target_type</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span></code></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-17-1.png" width="672"></p>
</div>
</div>
<div class="section level2">
<h2 id="calibration">Calibration<a class="anchor" aria-label="anchor" href="#calibration"></a>
</h2>
<p>Calibration is a measure statistical consistency between the
forecasts and observed values. The most common way of assessing
calibration (more precisely: probabilistic calibration) are PIT
histograms. The probability integral transform (PIT) is equal to the
cumulative distribution function of a forecast evaluated at the observed
value. Ideally, pit values should be uniformly distributed after the
transformation.</p>
<p>We can compute pit values as such:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_continuous</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pit.html">pit</a></span><span class="op">(</span>by <span class="op">=</span> <span class="st">"model"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span>
<span><span class="co">#&gt;                      model pit_value</span></span>
<span><span class="co">#&gt;                     &lt;char&gt;     &lt;num&gt;</span></span>
<span><span class="co">#&gt;   1: EuroCOVIDhub-baseline     0.025</span></span>
<span><span class="co">#&gt;   2: EuroCOVIDhub-baseline     0.525</span></span>
<span><span class="co">#&gt;   3: EuroCOVIDhub-baseline     0.000</span></span>
<span><span class="co">#&gt;   4: EuroCOVIDhub-baseline     0.000</span></span>
<span><span class="co">#&gt;   5: EuroCOVIDhub-baseline     0.200</span></span>
<span><span class="co">#&gt;  ---                                </span></span>
<span><span class="co">#&gt; 883:       UMass-MechBayes     0.950</span></span>
<span><span class="co">#&gt; 884:       UMass-MechBayes     0.500</span></span>
<span><span class="co">#&gt; 885:       UMass-MechBayes     0.100</span></span>
<span><span class="co">#&gt; 886:       UMass-MechBayes     0.450</span></span>
<span><span class="co">#&gt; 887:       UMass-MechBayes     0.100</span></span></code></pre></div>
<p>And visualise the results as such:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_continuous</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pit.html">pit</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"target_type"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_pit.html">plot_pit</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">model</span> <span class="op">~</span> <span class="va">target_type</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span></code></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-19-1.png" width="672"></p>
<p>Similarly for quantile-based forecasts:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_quantile</span><span class="op">[</span><span class="va">quantile_level</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="fl">0.1</span><span class="op">)</span>, <span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pit.html">pit</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"target_type"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_pit.html">plot_pit</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">model</span> <span class="op">~</span> <span class="va">target_type</span><span class="op">)</span></span></code></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-20-1.png" width="672"></p>
<!-- Another way to look at calibration are interval coverage and quantile coverage. Interval coverage is the percentage of true values that fall inside a given central prediction interval. Quantile coverage is the percentage of observed values that fall below a given quantile level.  -->
<!-- In order to plot interval coverage, you need to include "range" in the `by` argument to `summarise_scores()`. The green area on the plot marks conservative behaviour, i.e. your empirical coverage is greater than it nominally need be (e.g. 55% of true values covered by all 50% central prediction intervals.) -->
<!-- To visualise quantile coverage, you need to include "quantile_level" in `by`. Again, the green area corresponds to conservative forecasts, where central prediction intervals would cover more than needed.  -->
</div>
<div class="section level2">
<h2 id="pairwise-comparisons">Pairwise comparisons<a class="anchor" aria-label="anchor" href="#pairwise-comparisons"></a>
</h2>
<p>Relative scores for different models can be computed using pairwise
comparisons, a sort of pairwise tournament where all combinations of two
models are compared against each other based on the overlapping set of
available forecasts common to both models. Internally, a ratio of the
mean scores of both models is computed. The relative score of a model is
then the geometric mean of all mean score ratios which involve that
model. When a baseline is provided, then that baseline is excluded from
the relative scores for individual models (which therefore differ
slightly from relative scores without a baseline) and all relative
scores are scaled by (i.e. divided by) the relative score of the
baseline model.</p>
<p>In <code>scoringutils</code>, pairwise comparisons can be made in two
ways: Through the standalone function <code><a href="../reference/pairwise_comparison.html">pairwise_comparison()</a></code>
or from within <code><a href="../reference/summarise_scores.html">summarise_scores()</a></code> which simply adds
relative scores to an existing set of scores.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecast_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pairwise_comparison.html">pairwise_comparison</a></span><span class="op">(</span>by <span class="op">=</span> <span class="st">"model"</span>, baseline <span class="op">=</span> <span class="st">"EuroCOVIDhub-baseline"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span>
<span><span class="co">#&gt;                     model       compare_against mean_scores_ratio         pval</span></span>
<span><span class="co">#&gt;                    &lt;char&gt;                &lt;char&gt;             &lt;num&gt;        &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1: EuroCOVIDhub-baseline  epiforecasts-EpiNow2         1.3703452 9.164893e-18</span></span>
<span><span class="co">#&gt;  2: EuroCOVIDhub-baseline       UMass-MechBayes         3.0275019 2.627464e-20</span></span>
<span><span class="co">#&gt;  3: EuroCOVIDhub-baseline EuroCOVIDhub-ensemble         1.5925819 2.608666e-32</span></span>
<span><span class="co">#&gt;  4: EuroCOVIDhub-baseline EuroCOVIDhub-baseline         1.0000000 1.000000e+00</span></span>
<span><span class="co">#&gt;  5: EuroCOVIDhub-ensemble EuroCOVIDhub-baseline         0.6279112 2.608666e-32</span></span>
<span><span class="co">#&gt;  6: EuroCOVIDhub-ensemble       UMass-MechBayes         0.7867229 1.244731e-04</span></span>
<span><span class="co">#&gt;  7: EuroCOVIDhub-ensemble  epiforecasts-EpiNow2         0.8606607 1.881520e-02</span></span>
<span><span class="co">#&gt;  8: EuroCOVIDhub-ensemble EuroCOVIDhub-ensemble         1.0000000 1.000000e+00</span></span>
<span><span class="co">#&gt;  9:       UMass-MechBayes EuroCOVIDhub-ensemble         1.2710955 1.244731e-04</span></span>
<span><span class="co">#&gt; 10:       UMass-MechBayes  epiforecasts-EpiNow2         0.7439673 7.253878e-03</span></span>
<span><span class="co">#&gt; 11:       UMass-MechBayes EuroCOVIDhub-baseline         0.3303053 2.627464e-20</span></span>
<span><span class="co">#&gt; 12:       UMass-MechBayes       UMass-MechBayes         1.0000000 1.000000e+00</span></span>
<span><span class="co">#&gt; 13:  epiforecasts-EpiNow2       UMass-MechBayes         1.3441452 7.253878e-03</span></span>
<span><span class="co">#&gt; 14:  epiforecasts-EpiNow2 EuroCOVIDhub-ensemble         1.1618981 1.881520e-02</span></span>
<span><span class="co">#&gt; 15:  epiforecasts-EpiNow2 EuroCOVIDhub-baseline         0.7297431 9.164893e-18</span></span>
<span><span class="co">#&gt; 16:  epiforecasts-EpiNow2  epiforecasts-EpiNow2         1.0000000 1.000000e+00</span></span>
<span><span class="co">#&gt;         adj_pval wis_relative_skill wis_scaled_relative_skill</span></span>
<span><span class="co">#&gt;            &lt;num&gt;              &lt;num&gt;                     &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1: 3.665957e-17          1.6032604                 1.0000000</span></span>
<span><span class="co">#&gt;  2: 1.313732e-19          1.6032604                 1.0000000</span></span>
<span><span class="co">#&gt;  3: 1.565200e-31          1.6032604                 1.0000000</span></span>
<span><span class="co">#&gt;  4: 1.000000e+00          1.6032604                 1.0000000</span></span>
<span><span class="co">#&gt;  5: 1.565200e-31          0.8074916                 0.5036559</span></span>
<span><span class="co">#&gt;  6: 3.734192e-04          0.8074916                 0.5036559</span></span>
<span><span class="co">#&gt;  7: 1.881520e-02          0.8074916                 0.5036559</span></span>
<span><span class="co">#&gt;  8: 1.000000e+00          0.8074916                 0.5036559</span></span>
<span><span class="co">#&gt;  9: 3.734192e-04          0.7475873                 0.4662919</span></span>
<span><span class="co">#&gt; 10: 1.450776e-02          0.7475873                 0.4662919</span></span>
<span><span class="co">#&gt; 11: 1.313732e-19          0.7475873                 0.4662919</span></span>
<span><span class="co">#&gt; 12: 1.000000e+00          0.7475873                 0.4662919</span></span>
<span><span class="co">#&gt; 13: 1.450776e-02          1.0332277                 0.6444541</span></span>
<span><span class="co">#&gt; 14: 1.881520e-02          1.0332277                 0.6444541</span></span>
<span><span class="co">#&gt; 15: 3.665957e-17          1.0332277                 0.6444541</span></span>
<span><span class="co">#&gt; 16: 1.000000e+00          1.0332277                 0.6444541</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecast_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span>by <span class="op">=</span> <span class="st">"model"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_pairwise_comparison.html">add_pairwise_comparison</a></span><span class="op">(</span>baseline <span class="op">=</span> <span class="st">"EuroCOVIDhub-baseline"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span>
<span><span class="co">#&gt; Warning in pairwise_comparison(scores = scores, metric = metric, baseline =</span></span>
<span><span class="co">#&gt; baseline, : `by` is set to 'model', which is also the unit of a single</span></span>
<span><span class="co">#&gt; forecast. This doesn't look right. All relative skill scores will be equal to</span></span>
<span><span class="co">#&gt; 1.</span></span>
<span><span class="co">#&gt; Key: &lt;model&gt;</span></span>
<span><span class="co">#&gt;                    model         wis overprediction underprediction dispersion</span></span>
<span><span class="co">#&gt;                   &lt;char&gt;       &lt;num&gt;          &lt;num&gt;           &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: EuroCOVIDhub-baseline 14321.48926    7081.000000      5143.53567 2096.95360</span></span>
<span><span class="co">#&gt; 2: EuroCOVIDhub-ensemble  8992.62316    5025.130095      2120.64029 1846.85278</span></span>
<span><span class="co">#&gt; 3:       UMass-MechBayes    52.65195       8.978601        16.80095   26.87239</span></span>
<span><span class="co">#&gt; 4:  epiforecasts-EpiNow2 10827.40786    6179.439535      1697.23411 2950.73422</span></span>
<span><span class="co">#&gt;           bias interval_coverage_50 interval_coverage_90</span></span>
<span><span class="co">#&gt;          &lt;num&gt;                &lt;num&gt;                &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:  0.21851562            0.4960938            0.9101562</span></span>
<span><span class="co">#&gt; 2:  0.00812500            0.6328125            0.9023438</span></span>
<span><span class="co">#&gt; 3: -0.02234375            0.4609375            0.8750000</span></span>
<span><span class="co">#&gt; 4: -0.04336032            0.4453441            0.8461538</span></span>
<span><span class="co">#&gt;    interval_coverage_deviation   ae_median wis_relative_skill</span></span>
<span><span class="co">#&gt;                          &lt;num&gt;       &lt;num&gt;              &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:                 0.002102273 19353.42969                  1</span></span>
<span><span class="co">#&gt; 2:                 0.050752841 12077.10156                  1</span></span>
<span><span class="co">#&gt; 3:                -0.024886364    78.47656                  1</span></span>
<span><span class="co">#&gt; 4:                -0.057861612 14521.10526                  1</span></span>
<span><span class="co">#&gt;    wis_scaled_relative_skill</span></span>
<span><span class="co">#&gt;                        &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:                         1</span></span>
<span><span class="co">#&gt; 2:                         1</span></span>
<span><span class="co">#&gt; 3:                         1</span></span>
<span><span class="co">#&gt; 4:                         1</span></span></code></pre></div>
<p>If using the <code><a href="../reference/pairwise_comparison.html">pairwise_comparison()</a></code> function, we can also
visualise pairwise comparisons by showing the mean score ratios between
models. By default, smaller values are better and the model we care
about is showing on the y axis on the left, while the model against it
is compared is shown on the x-axis on the bottom. In the example above,
the EuroCOVIDhub-ensemble performs best (it only has values smaller 1),
while the EuroCOVIDhub-baseline performs worst (and only has values
larger than 1). For cases, the UMass-MechBayes model is of course
excluded as there are no case forecasts available and therefore the set
of overlapping forecasts is empty.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecast_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pairwise_comparison.html">pairwise_comparison</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"target_type"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_pairwise_comparison.html">plot_pairwise_comparison</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">target_type</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span></code></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-25-1.png" width="864"></p>
</div>
<div class="section level2">
<h2 id="additional-analyses-and-visualisations">Additional analyses and visualisations<a class="anchor" aria-label="anchor" href="#additional-analyses-and-visualisations"></a>
</h2>
<div class="section level3">
<h3 id="correlation-between-scores">Correlation between scores<a class="anchor" aria-label="anchor" href="#correlation-between-scores"></a>
</h3>
<p>It may sometimes be interesting to see how different scores correlate
with each other. We can examine this using the function
<code><a href="../reference/correlation.html">correlation()</a></code>. When dealing with quantile-based forecasts,
it is important to call <code>summarise_scorees()</code> before
<code><a href="../reference/correlation.html">correlation()</a></code> to summarise over quantiles before computing
correlations.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecast_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/correlation.html">correlation</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span>
<span><span class="co">#&gt;          wis overprediction underprediction  dispersion       bias</span></span>
<span><span class="co">#&gt;        &lt;num&gt;          &lt;num&gt;           &lt;num&gt;       &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: 1.0000000      0.9917884       0.8821058  0.86564717 0.61587946</span></span>
<span><span class="co">#&gt; 2: 0.9917884      1.0000000       0.8158534  0.91900505 0.51068021</span></span>
<span><span class="co">#&gt; 3: 0.8821058      0.8158534       1.0000000  0.52982259 0.91280769</span></span>
<span><span class="co">#&gt; 4: 0.8656472      0.9190050       0.5298226  1.00000000 0.14860643</span></span>
<span><span class="co">#&gt; 5: 0.6158795      0.5106802       0.9128077  0.14860643 1.00000000</span></span>
<span><span class="co">#&gt; 6: 0.1565567      0.1740382       0.1630289  0.04407105 0.06639491</span></span>
<span><span class="co">#&gt; 7: 0.2818348      0.1968480       0.6141229 -0.17841559 0.74137210</span></span>
<span><span class="co">#&gt; 8: 0.1364221      0.1123720       0.2954741 -0.12711127 0.30908292</span></span>
<span><span class="co">#&gt; 9: 0.9999780      0.9909177       0.8851559  0.86247754 0.62106954</span></span>
<span><span class="co">#&gt;    interval_coverage_50 interval_coverage_90 interval_coverage_deviation</span></span>
<span><span class="co">#&gt;                   &lt;num&gt;                &lt;num&gt;                       &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:           0.15655670            0.2818348                   0.1364221</span></span>
<span><span class="co">#&gt; 2:           0.17403818            0.1968480                   0.1123720</span></span>
<span><span class="co">#&gt; 3:           0.16302890            0.6141229                   0.2954741</span></span>
<span><span class="co">#&gt; 4:           0.04407105           -0.1784156                  -0.1271113</span></span>
<span><span class="co">#&gt; 5:           0.06639491            0.7413721                   0.3090829</span></span>
<span><span class="co">#&gt; 6:           1.00000000            0.6417542                   0.9466440</span></span>
<span><span class="co">#&gt; 7:           0.64175425            1.0000000                   0.8451292</span></span>
<span><span class="co">#&gt; 8:           0.94664396            0.8451292                   1.0000000</span></span>
<span><span class="co">#&gt; 9:           0.15565388            0.2861731                   0.1376834</span></span>
<span><span class="co">#&gt;    ae_median                      metric</span></span>
<span><span class="co">#&gt;        &lt;num&gt;                      &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1: 0.9999780                         wis</span></span>
<span><span class="co">#&gt; 2: 0.9909177              overprediction</span></span>
<span><span class="co">#&gt; 3: 0.8851559             underprediction</span></span>
<span><span class="co">#&gt; 4: 0.8624775                  dispersion</span></span>
<span><span class="co">#&gt; 5: 0.6210695                        bias</span></span>
<span><span class="co">#&gt; 6: 0.1556539        interval_coverage_50</span></span>
<span><span class="co">#&gt; 7: 0.2861731        interval_coverage_90</span></span>
<span><span class="co">#&gt; 8: 0.1376834 interval_coverage_deviation</span></span>
<span><span class="co">#&gt; 9: 1.0000000                   ae_median</span></span></code></pre></div>
<p>Visualising correlations:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">forecast_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise_scores.html">summarise_scores</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/correlation.html">correlation</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_correlation.html">plot_correlation</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span></code></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-27-1.png" width="672"></p>
</div>
</div>
<div class="section level2">
<h2 id="converting-to-quantile-based-forecasts">Converting to quantile-based forecasts<a class="anchor" aria-label="anchor" href="#converting-to-quantile-based-forecasts"></a>
</h2>
<p>Different metrics are available for different forecasting formats. In
some cases, you may for example have forecasts in a sample-based format,
but wish to make use of some of the functionality only available to
quantile-based forecasts. For example, you may want to use the
decomposition of the weighted interval score, or may like to compute
interval coverage values.</p>
<p>You can convert your sample-based forecasts into a quantile-based
format using the function <code><a href="../reference/sample_to_quantile.html">sample_to_quantile()</a></code>. There is,
however, one caveat: Quantiles will be calculated based on the
predictive samples, which may introduce a bias if the number of
available samples is small.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_integer</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/sample_to_quantile.html">sample_to_quantile</a></span><span class="op">(</span></span>
<span>    quantile_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.025</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.95</span>, <span class="fl">0.05</span><span class="op">)</span>, <span class="fl">0.975</span>, <span class="fl">0.99</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/score.html">score</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Some rows containing NA values may be removed. This is fine if not unexpected.</span></span>
<span><span class="co">#&gt;      location location_name target_end_date target_type forecast_date</span></span>
<span><span class="co">#&gt;        &lt;char&gt;        &lt;char&gt;          &lt;Date&gt;      &lt;char&gt;        &lt;Date&gt;</span></span>
<span><span class="co">#&gt;   1:       DE       Germany      2021-05-08       Cases    2021-05-03</span></span>
<span><span class="co">#&gt;   2:       DE       Germany      2021-05-08       Cases    2021-05-03</span></span>
<span><span class="co">#&gt;   3:       DE       Germany      2021-05-08       Cases    2021-05-03</span></span>
<span><span class="co">#&gt;   4:       DE       Germany      2021-05-08      Deaths    2021-05-03</span></span>
<span><span class="co">#&gt;   5:       DE       Germany      2021-05-08      Deaths    2021-05-03</span></span>
<span><span class="co">#&gt;  ---                                                                 </span></span>
<span><span class="co">#&gt; 883:       IT         Italy      2021-07-24      Deaths    2021-07-12</span></span>
<span><span class="co">#&gt; 884:       IT         Italy      2021-07-24      Deaths    2021-07-05</span></span>
<span><span class="co">#&gt; 885:       IT         Italy      2021-07-24      Deaths    2021-07-12</span></span>
<span><span class="co">#&gt; 886:       IT         Italy      2021-07-24      Deaths    2021-07-05</span></span>
<span><span class="co">#&gt; 887:       IT         Italy      2021-07-24      Deaths    2021-07-12</span></span>
<span><span class="co">#&gt;                      model horizon         wis overprediction underprediction</span></span>
<span><span class="co">#&gt;                     &lt;char&gt;   &lt;num&gt;       &lt;num&gt;          &lt;num&gt;           &lt;num&gt;</span></span>
<span><span class="co">#&gt;   1: EuroCOVIDhub-ensemble       1  6671.68207   2.110043e+03        0.000000</span></span>
<span><span class="co">#&gt;   2: EuroCOVIDhub-baseline       1 18441.13061   1.446498e+04        0.000000</span></span>
<span><span class="co">#&gt;   3:  epiforecasts-EpiNow2       1 22042.77309   1.548071e+04        0.000000</span></span>
<span><span class="co">#&gt;   4: EuroCOVIDhub-ensemble       1    59.46028   9.682609e+00        0.000000</span></span>
<span><span class="co">#&gt;   5: EuroCOVIDhub-baseline       1    75.93215   0.000000e+00        1.195652</span></span>
<span><span class="co">#&gt;  ---                                                                         </span></span>
<span><span class="co">#&gt; 883: EuroCOVIDhub-baseline       2    60.71862   1.323913e+01        0.000000</span></span>
<span><span class="co">#&gt; 884:       UMass-MechBayes       3     5.79650   3.695652e-01        0.000000</span></span>
<span><span class="co">#&gt; 885:       UMass-MechBayes       2    26.18112   1.891304e+01        0.000000</span></span>
<span><span class="co">#&gt; 886:  epiforecasts-EpiNow2       3    25.13032   3.478261e-01        0.000000</span></span>
<span><span class="co">#&gt; 887:  epiforecasts-EpiNow2       2    44.07931   2.410435e+01        0.000000</span></span>
<span><span class="co">#&gt;       dispersion  bias interval_coverage_50 interval_coverage_90</span></span>
<span><span class="co">#&gt;            &lt;num&gt; &lt;num&gt;               &lt;lgcl&gt;               &lt;lgcl&gt;</span></span>
<span><span class="co">#&gt;   1: 4561.638591  0.60                FALSE                 TRUE</span></span>
<span><span class="co">#&gt;   2: 3976.145828  0.98                FALSE                FALSE</span></span>
<span><span class="co">#&gt;   3: 6562.060048  0.90                FALSE                 TRUE</span></span>
<span><span class="co">#&gt;   4:   49.777674  0.30                 TRUE                 TRUE</span></span>
<span><span class="co">#&gt;   5:   74.736502 -0.10                 TRUE                 TRUE</span></span>
<span><span class="co">#&gt;  ---                                                            </span></span>
<span><span class="co">#&gt; 883:   47.479491  0.50                 TRUE                 TRUE</span></span>
<span><span class="co">#&gt; 884:    5.426935  0.20                 TRUE                 TRUE</span></span>
<span><span class="co">#&gt; 885:    7.268076  0.90                FALSE                 TRUE</span></span>
<span><span class="co">#&gt; 886:   24.782489  0.10                 TRUE                 TRUE</span></span>
<span><span class="co">#&gt; 887:   19.974959  0.70                FALSE                 TRUE</span></span>
<span><span class="co">#&gt;      interval_coverage_deviation ae_median</span></span>
<span><span class="co">#&gt;                            &lt;num&gt;     &lt;num&gt;</span></span>
<span><span class="co">#&gt;   1:                 -0.03909091    9414.0</span></span>
<span><span class="co">#&gt;   2:                 -0.49363636   29379.0</span></span>
<span><span class="co">#&gt;   3:                 -0.31181818   36513.0</span></span>
<span><span class="co">#&gt;   4:                  0.23363636      77.0</span></span>
<span><span class="co">#&gt;   5:                  0.41545455      27.5</span></span>
<span><span class="co">#&gt;  ---                                      </span></span>
<span><span class="co">#&gt; 883:                  0.05181818      58.5</span></span>
<span><span class="co">#&gt; 884:                  0.32454545       5.0</span></span>
<span><span class="co">#&gt; 885:                 -0.31181818      42.5</span></span>
<span><span class="co">#&gt; 886:                  0.41545455       8.0</span></span>
<span><span class="co">#&gt; 887:                 -0.13000000      73.5</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="available-metrics">Available metrics<a class="anchor" aria-label="anchor" href="#available-metrics"></a>
</h2>
<p>An overview of available metrics can be found in the
<code>metrics</code> data set that is included in the package.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metrics</span></span>
<span><span class="co">#&gt;                                           Metric               Name</span></span>
<span><span class="co">#&gt;                                           &lt;char&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt;  1:                               Absolute error           ae_point</span></span>
<span><span class="co">#&gt;  2:                               Absolute error          ae_median</span></span>
<span><span class="co">#&gt;  3:                                Squared error           se_point</span></span>
<span><span class="co">#&gt;  4:                                Squared error            se_mean</span></span>
<span><span class="co">#&gt;  5: (Continuous) ranked probability score (CRPS)               crps</span></span>
<span><span class="co">#&gt;  6:                                    Log score          log_score</span></span>
<span><span class="co">#&gt;  7:              (Weighted) interval score (WIS)     interval_score</span></span>
<span><span class="co">#&gt;  8:                 Dawid-Sebastiani score (DSS)                dss</span></span>
<span><span class="co">#&gt;  9:                             Brier score (BS)        brier_score</span></span>
<span><span class="co">#&gt; 10:                            Interval coverage           coverage</span></span>
<span><span class="co">#&gt; 11:                           Coverage deviation coverage_deviation</span></span>
<span><span class="co">#&gt; 12:                            Quantile coverage  quantile_coverage</span></span>
<span><span class="co">#&gt; 13:                                   Dispersion         dispersion</span></span>
<span><span class="co">#&gt; 14:       Median Absolute Deviation (Dispersion)                mad</span></span>
<span><span class="co">#&gt; 15:                      Under-, Over-prediction    underprediction</span></span>
<span><span class="co">#&gt; 16:                      Under-, Over-prediction     overprediction</span></span>
<span><span class="co">#&gt; 17:         Probability integral transform (PIT)               crps</span></span>
<span><span class="co">#&gt; 18:                                   Dispersion         dispersion</span></span>
<span><span class="co">#&gt; 19:                                         Bias               bias</span></span>
<span><span class="co">#&gt; 20:                             Mean score ratio  mean_scores_ratio</span></span>
<span><span class="co">#&gt; 21:                               Relative skill     relative_skill</span></span>
<span><span class="co">#&gt; 22:                        Scaled relative skill   scaled_rel_skill</span></span>
<span><span class="co">#&gt;                                           Metric               Name</span></span>
<span><span class="co">#&gt;                                   Functions Discrete Continuous Binary Quantile</span></span>
<span><span class="co">#&gt;                                      &lt;char&gt;   &lt;char&gt;     &lt;char&gt; &lt;char&gt;   &lt;char&gt;</span></span>
<span><span class="co">#&gt;  1: score(), ae_point()), ae_median_sample(        +          +      -        +</span></span>
<span><span class="co">#&gt;  2: score(), ae_point()), ae_median_sample(        +          +      -        +</span></span>
<span><span class="co">#&gt;  3:   score(), se_point(), se_mean_sample()        +          +      -        +</span></span>
<span><span class="co">#&gt;  4:   score(), se_point(), se_mean_sample()        +          +      -        +</span></span>
<span><span class="co">#&gt;  5:                       score(), ae_point        +          +      -        -</span></span>
<span><span class="co">#&gt;  6:   score(), logs_sample(), logs_binary()        -          +      +        -</span></span>
<span><span class="co">#&gt;  7:               score(), interval_score()        +          +      -        +</span></span>
<span><span class="co">#&gt;  8:                   score(), dss_sample()        +          +      -        -</span></span>
<span><span class="co">#&gt;  9:                  score(), brier_score()        -          -      +        -</span></span>
<span><span class="co">#&gt; 10:                                 score()        -          -      -        +</span></span>
<span><span class="co">#&gt; 11:                                 score()        -          -      -        +</span></span>
<span><span class="co">#&gt; 12:                                 score()        +          +      -        -</span></span>
<span><span class="co">#&gt; 13:               score(), interval_score()        -          -      -        +</span></span>
<span><span class="co">#&gt; 14:                   score(), mad_sample()        +          +      -        -</span></span>
<span><span class="co">#&gt; 15:               score(), interval_score()        -          -      -        +</span></span>
<span><span class="co">#&gt; 16:               score(), interval_score()        -          -      -        +</span></span>
<span><span class="co">#&gt; 17:                          score(), pit()        +          +      -        +</span></span>
<span><span class="co">#&gt; 18:               score(), interval_score()        -          -      -        +</span></span>
<span><span class="co">#&gt; 19: score(), bias_sample(), bias_quantile()        +          +      -        +</span></span>
<span><span class="co">#&gt; 20:                   pairwise_comparison()        ~          ~      ~        ~</span></span>
<span><span class="co">#&gt; 21:          score(), pairwise_comparison()        ~          ~      ~        ~</span></span>
<span><span class="co">#&gt; 22:          score(), pairwise_comparison()        ~          ~      ~        ~</span></span>
<span><span class="co">#&gt;                                   Functions Discrete Continuous Binary Quantile</span></span>
<span><span class="co">#&gt;                                                                                                                                                                                                           Info</span></span>
<span><span class="co">#&gt;                                                                                                                                                                                                         &lt;char&gt;</span></span>
<span><span class="co">#&gt;  1:                                                                                                                                               Suitable for scoring the median of a predictive distribution</span></span>
<span><span class="co">#&gt;  2:                                                                                                                                               Suitable for scoring the median of a predictive distribution</span></span>
<span><span class="co">#&gt;  3:                                                                                                                                                Suitable for scoring the mean of a predictive distribution.</span></span>
<span><span class="co">#&gt;  4:                                                                                                                                                Suitable for scoring the mean of a predictive distribution.</span></span>
<span><span class="co">#&gt;  5:                           Proper scoring rule (smaller is better), takes entire predictive distribution into account (global), penalises over- and under-confidence similarly, stable handling of outliers</span></span>
<span><span class="co">#&gt;  6:                               Proper scoring rule, smaller is better, equals negative log of the predictive density at observed value (local), penalises over-confidence severely, susceptible to outliers</span></span>
<span><span class="co">#&gt;  7:                                                              Proper scoring rule, smaller is better, similar properties to CRPS and converges to CRPS for an increasing number of equally spaced intervals</span></span>
<span><span class="co">#&gt;  8:                           Proper scoring rule, smaller is better, evaluates forecast based on mean and sd of predictive distribution (global), susceptible to outliers, penalises over-confidence severely</span></span>
<span><span class="co">#&gt;  9:                                                                                    Proper scoring rule, smaller is better, equals CRPS for binary outcomes, penalises over- and under-confidence similarly</span></span>
<span><span class="co">#&gt; 10:                                                 Proportion of observations falling inside a given central prediction interval (= 'empirical interval coverage'). Used to assess probabilistic calibration.</span></span>
<span><span class="co">#&gt; 11:                                                                                               Average difference between empirical and nominal interval coverage (coverage that should have been realised)</span></span>
<span><span class="co">#&gt; 12:                                                                                         Proportion of observations below a given quantile of the predictive CDF. Used to assess probabilistic calibration.</span></span>
<span><span class="co">#&gt; 13:                                                                                                                                       Dispersion component of WIS, measures width of predictive intervals.</span></span>
<span><span class="co">#&gt; 14:                                                                                                                    Measure for dispersion of a forecast: median of the absolute deviations from the median</span></span>
<span><span class="co">#&gt; 15:                                                                                                                                            Absolute amount of over-or under-prediction (components of WIS)</span></span>
<span><span class="co">#&gt; 16:                                                                                                                                            Absolute amount of over-or under-prediction (components of WIS)</span></span>
<span><span class="co">#&gt; 17:                                                                                   PIT transform is the CDF of the predictive distribution evaluated at the observed values. PIT values should be uniform. </span></span>
<span><span class="co">#&gt; 18:                                                                                                                                       Dispersion component of WIS, measures width of predictive intervals.</span></span>
<span><span class="co">#&gt; 19:                                                                                       Measure of relative tendency to over- or under-predict (aspect of calibration), bounded between -1 and 1 (ideally 0)</span></span>
<span><span class="co">#&gt; 20:                                                                                                             Compares performance of two models. Properties depend on the metric chosen for the comparison.</span></span>
<span><span class="co">#&gt; 21:                                                         Ranks models based on pairwise comparisons, useful in the context of missing forecasts. Properties depend on the metric chosen for the comparison.</span></span>
<span><span class="co">#&gt; 22: Ranks models based on pairwise comparisons, useful in the context of missing forecasts. Scaled (i.e. divided) by the score of a baseline model. Properties depend on the metric chosen for the comparison.</span></span>
<span><span class="co">#&gt;                                                                                                                                                                                                           Info</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="lower-level-functions">Lower level functions<a class="anchor" aria-label="anchor" href="#lower-level-functions"></a>
</h2>
<p>Most of these metrics are available as lower level functions and
extensively documented. Have a look at the help files to understand
these better.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://followtheargument.org/" class="external-link">Nikos Bosse</a>, <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Hugo Gruson, Sebastian Funk.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
