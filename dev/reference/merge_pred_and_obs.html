<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The function more or less provides a wrapper around merge that
aims to handle the merging well if additional columns are present
in one or both data sets. If in doubt, you should probably merge the
data sets manually."><!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light"><script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/5/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Merge Forecast Data And Observations — merge_pred_and_obs • scoringutils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Merge Forecast Data And Observations — merge_pred_and_obs"><meta property="og:description" content="The function more or less provides a wrapper around merge that
aims to handle the merging well if additional columns are present
in one or both data sets. If in doubt, you should probably merge the
data sets manually."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/5/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/5/darkly/bootstrap.css" media="(prefers-color-scheme: dark)"><!-- preferably CSS --><link rel="stylesheet" href="../preferably.css"><link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)"><script src="../darkswitch.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">scoringutils</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.0.3000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/getting-started.html">Getting started</a>
    <a class="dropdown-item" href="../articles/metric-details.html">Details on the metrics implemented in `scoringutils`</a>
    <a class="dropdown-item" href="../articles/scoring-forecasts-directly.html">Scoring forecasts directly</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiforecasts/scoringutils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>

        
        <li>
          <a class="external-link nav-link" id="css-toggle-btn" aria-label="github">
            <span class="fas fa fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        
        
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Merge Forecast Data And Observations</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/scoringutils/blob/HEAD/R/utils_data_handling.R" class="external-link"><code>R/utils_data_handling.R</code></a></small>
      <div class="d-none name"><code>merge_pred_and_obs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function more or less provides a wrapper around <code>merge</code> that
aims to handle the merging well if additional columns are present
in one or both data sets. If in doubt, you should probably merge the
data sets manually.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">merge_pred_and_obs</span><span class="op">(</span></span>
<span>  <span class="va">forecasts</span>,</span>
<span>  <span class="va">observations</span>,</span>
<span>  join <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"left"</span>, <span class="st">"full"</span>, <span class="st">"right"</span><span class="op">)</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>forecasts</dt>
<dd><p>data.frame with the forecast data (as can be passed to
<code><a href="score.html">score()</a></code>).</p></dd>


<dt>observations</dt>
<dd><p>data.frame with the observations</p></dd>


<dt>join</dt>
<dd><p>character, one of <code>c("left", "full", "right")</code>. Determines the
type of the join. Usually, a left join is appropriate, but sometimes you
may want to do a full join to keep dates for which there is a forecast, but
no ground truth data.</p></dd>


<dt>by</dt>
<dd><p>character vector that denotes the columns by which to merge. Any
value that is not a column in observations will be removed.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a data.frame with forecasts and observations</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">forecasts</span> <span class="op">&lt;-</span> <span class="va">example_quantile_forecasts_only</span></span></span>
<span class="r-in"><span><span class="va">observations</span> <span class="op">&lt;-</span> <span class="va">example_truth_only</span></span></span>
<span class="r-in"><span><span class="fu">merge_pred_and_obs</span><span class="op">(</span><span class="va">forecasts</span>, <span class="va">observations</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        location target_end_date target_type true_value location_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:       DE      2021-01-02       Cases     127300       Germany</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:       DE      2021-01-02      Deaths       4534       Germany</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:       DE      2021-01-09       Cases     154922       Germany</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:       DE      2021-01-09      Deaths       6117       Germany</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:       DE      2021-01-16       Cases     110183       Germany</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20541:       IT      2021-07-24      Deaths         78         Italy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20542:       IT      2021-07-24      Deaths         78         Italy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20543:       IT      2021-07-24      Deaths         78         Italy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20544:       IT      2021-07-24      Deaths         78         Italy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20545:       IT      2021-07-24      Deaths         78         Italy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        forecast_date quantile prediction                model horizon</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:          &lt;NA&gt;       NA         NA                 &lt;NA&gt;      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:          &lt;NA&gt;       NA         NA                 &lt;NA&gt;      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:          &lt;NA&gt;       NA         NA                 &lt;NA&gt;      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:          &lt;NA&gt;       NA         NA                 &lt;NA&gt;      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:          &lt;NA&gt;       NA         NA                 &lt;NA&gt;      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20541:    2021-07-12    0.850        352 epiforecasts-EpiNow2       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20542:    2021-07-12    0.900        397 epiforecasts-EpiNow2       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20543:    2021-07-12    0.950        499 epiforecasts-EpiNow2       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20544:    2021-07-12    0.975        611 epiforecasts-EpiNow2       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20545:    2021-07-12    0.990        719 epiforecasts-EpiNow2       2</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://followtheargument.org/" class="external-link">Nikos Bosse</a>, <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Hugo Gruson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

    </footer></div>

  

  

  </body></html>

