<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Internal helper function to transform from a quantile format to an interval
format (which is no longer a supported forecast format, but still used
internally. The function mimics an S3 generic, but is not actually an S3
generic, as we want the functions to be internal and not exported.)
Quantile format
In a quantile format, a prediction is characterised by one or multiple
predicted values and the corresponding quantile levels. For example, a
prediction in a quantile format could be represented by the 0.05, 0.25, 0.5,
0.75 and 0.95 quantiles of the predictive distribution.
Interval format
In the interval format, two quantiles are assumed to form a prediction
interval. Prediction intervals need to be symmetric around the median and
are characterised by a lower and an upper bound. The lower bound is defined
by the lower quantile and the upper bound is defined by the upper quantile.
A 90% prediction interval, for example, covers 90% of the probability mass
and is defined by the 5% and 95% quantiles. A forecast could therefore
be characterised by one or multiple prediction intervals, e.g. the lower
and upper bounds of the 50% and 90% prediction intervals (corresponding to
the 0.25 and 0.75 as well as the 0.05 and 0.095 quantiles)."><title>Transform from a quantile format to an interval format — quantile_to_interval • scoringutils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transform from a quantile format to an interval format — quantile_to_interval"><meta property="og:description" content="Internal helper function to transform from a quantile format to an interval
format (which is no longer a supported forecast format, but still used
internally. The function mimics an S3 generic, but is not actually an S3
generic, as we want the functions to be internal and not exported.)
Quantile format
In a quantile format, a prediction is characterised by one or multiple
predicted values and the corresponding quantile levels. For example, a
prediction in a quantile format could be represented by the 0.05, 0.25, 0.5,
0.75 and 0.95 quantiles of the predictive distribution.
Interval format
In the interval format, two quantiles are assumed to form a prediction
interval. Prediction intervals need to be symmetric around the median and
are characterised by a lower and an upper bound. The lower bound is defined
by the lower quantile and the upper bound is defined by the upper quantile.
A 90% prediction interval, for example, covers 90% of the probability mass
and is defined by the 5% and 95% quantiles. A forecast could therefore
be characterised by one or multiple prediction intervals, e.g. the lower
and upper bounds of the 50% and 90% prediction intervals (corresponding to
the 0.25 and 0.75 as well as the 0.05 and 0.095 quantiles)."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">scoringutils</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/scoringutils.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Deprecated-functions.html">Deprecated functions</a>
    <a class="dropdown-item" href="../articles/Deprecated-visualisations.html">Deprecated Visualisations</a>
    <a class="dropdown-item" href="../articles/scoring-rules.html">Scoring rules in `scoringutils`</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="navbar-nav"><li><form class="form-inline" role="search">
<input type="search" class="form-control" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiforecasts/scoringutils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Transform from a quantile format to an interval format</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/scoringutils/blob/HEAD/R/utils_data_handling.R" class="external-link"><code>R/utils_data_handling.R</code></a></small>
      <div class="d-none name"><code>quantile_to_interval.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Internal helper function to transform from a quantile format to an interval
format (which is no longer a supported forecast format, but still used
internally. The function mimics an S3 generic, but is not actually an S3
generic, as we want the functions to be internal and not exported.)</p>
<p><strong>Quantile format</strong>
In a quantile format, a prediction is characterised by one or multiple
predicted values and the corresponding quantile levels. For example, a
prediction in a quantile format could be represented by the 0.05, 0.25, 0.5,
0.75 and 0.95 quantiles of the predictive distribution.</p>
<p><strong>Interval format</strong>
In the interval format, two quantiles are assumed to form a prediction
interval. Prediction intervals need to be symmetric around the median and
are characterised by a lower and an upper bound. The lower bound is defined
by the lower quantile and the upper bound is defined by the upper quantile.
A 90% prediction interval, for example, covers 90% of the probability mass
and is defined by the 5% and 95% quantiles. A forecast could therefore
be characterised by one or multiple prediction intervals, e.g. the lower
and upper bounds of the 50% and 90% prediction intervals (corresponding to
the 0.25 and 0.75 as well as the 0.05 and 0.095 quantiles).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">quantile_to_interval</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">quantile_to_interval_dataframe</span><span class="op">(</span></span>
<span>  <span class="va">forecast</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"long"</span>,</span>
<span>  keep_quantile_col <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">quantile_to_interval_numeric</span><span class="op">(</span><span class="va">observed</span>, <span class="va">predicted</span>, <span class="va">quantile_level</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments</p></dd>


<dt id="arg-forecast">forecast<a class="anchor" aria-label="anchor" href="#arg-forecast"></a></dt>
<dd><p>A data.table with forecasts in a quantile-based format (see
<code><a href="as_forecast.html">as_forecast()</a></code>).</p></dd>


<dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>The format of the output. Either "long" or "wide". If "long"
(the default), there will be a column <code>boundary</code> (with values either
"upper" or "lower" and a column <code>interval_range</code> that contains the range of
the interval. If "wide", there will be a column <code>interval_range</code> and two
columns <code>lower</code> and <code>upper</code> that contain the lower and upper bounds of the
prediction interval, respectively.</p></dd>


<dt id="arg-keep-quantile-col">keep_quantile_col<a class="anchor" aria-label="anchor" href="#arg-keep-quantile-col"></a></dt>
<dd><p>keep the <code>quantile_level</code> column in the final
output after transformation (default is FALSE). This only works if
<code>format = "long"</code>. If <code>format = "wide"</code>, the <code>quantile_level</code> column will
always be dropped.</p></dd>


<dt id="arg-observed">observed<a class="anchor" aria-label="anchor" href="#arg-observed"></a></dt>
<dd><p>Numeric vector of size n with the observed values.</p></dd>


<dt id="arg-predicted">predicted<a class="anchor" aria-label="anchor" href="#arg-predicted"></a></dt>
<dd><p>Numeric nxN matrix of predictive
quantiles, n (number of rows) being the number of forecasts (corresponding
to the number of observed values) and N
(number of columns) the number of quantiles per forecast.
If <code>observed</code> is just a single number, then predicted can just be a
vector of size N.</p></dd>


<dt id="arg-quantile-level">quantile_level<a class="anchor" aria-label="anchor" href="#arg-quantile-level"></a></dt>
<dd><p>Vector of of size N with the quantile levels
for which predictions were made.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data.table with forecasts in an interval format.</p>


<p><em>quantile_to_interval_dataframe</em>:
a data.table in an interval format (either "long" or "wide"), with or
without a <code>quantile_level</code> column. Rows will not be reordered.</p>


<p><em>quantile_to_interval.numeric</em>:
a data.table in a wide interval format with columns <code>forecast_id</code>,
<code>observed</code>, <code>lower</code>, <code>upper</code>, and <code>interval_range</code>. The <code>forecast_id</code> column
is a unique identifier for each forecast. Rows will be reordered according to
<code>forecast_id</code> and <code>interval_range</code>.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://followtheargument.org/" class="external-link">Nikos Bosse</a>, <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Hugo Gruson, Sebastian Funk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>

    </footer></div>

  

  

  </body></html>

