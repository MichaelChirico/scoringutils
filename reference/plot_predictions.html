<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Make a plot of observed and predicted values"><!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light"><script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/5/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Plot Predictions vs True Values — plot_predictions • scoringutils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot Predictions vs True Values — plot_predictions"><meta property="og:description" content="Make a plot of observed and predicted values"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/5/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/5/darkly/bootstrap.css" media="(prefers-color-scheme: dark)"><!-- preferably CSS --><link rel="stylesheet" href="../preferably.css"><link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)"><script src="../darkswitch.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">scoringutils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/getting-started.html">Getting started</a>
    <a class="dropdown-item" href="../articles/metric-details.html">Details on the metrics implemented in `scoringutils`</a>
    <a class="dropdown-item" href="../articles/scoring-forecasts-directly.html">Scoring forecasts directly</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiforecasts/scoringutils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>

        
        <li>
          <a class="external-link nav-link" id="css-toggle-btn" aria-label="github">
            <span class="fas fa fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        
        
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Plot Predictions vs True Values</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/scoringutils/blob/HEAD/R/plot.R" class="external-link"><code>R/plot.R</code></a></small>
      <div class="d-none name"><code>plot_predictions.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Make a plot of observed and predicted values</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">plot_predictions</span><span class="op">(</span>
  data <span class="op">=</span> <span class="cn">NULL</span>,
  forecasts <span class="op">=</span> <span class="cn">NULL</span>,
  truth_data <span class="op">=</span> <span class="cn">NULL</span>,
  merge_by <span class="op">=</span> <span class="cn">NULL</span>,
  x <span class="op">=</span> <span class="st">"date"</span>,
  filter_truth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
  filter_forecasts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
  filter_both <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
  range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">90</span><span class="op">)</span>,
  facet_formula <span class="op">=</span> <span class="cn">NULL</span>,
  facet_wrap_or_grid <span class="op">=</span> <span class="st">"facet_wrap"</span>,
  ncol <span class="op">=</span> <span class="cn">NULL</span>,
  scales <span class="op">=</span> <span class="st">"free_y"</span>,
  allow_truth_without_pred <span class="op">=</span> <span class="cn">FALSE</span>,
  remove_from_truth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"forecaster"</span>, <span class="st">"quantile"</span>, <span class="st">"prediction"</span>, <span class="st">"sample"</span>,
    <span class="st">"interval"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>a data.frame that follows the same specifications outlined in
<code><a href="score.html">score()</a></code>. The data.frame needs to have columns called
"true_value", "prediction" and then either a column called sample, or one
called "quantile" or two columns called "range" and "boundary". Internally,
these will be separated into a truth and forecast data set in order to be
able to apply different filtering to truth data and forecasts. Alternatively
you can directly provide a separate truth and forecasts data frame as input.
These data sets, however, need to be mergeable, in order to connect forecasts
and truth data for plotting.</p></dd>
<dt>forecasts</dt>
<dd><p>data.frame with forecasts, that should follow the same
general guidelines as the <code>data</code> input. Argument can be used to supply
forecasts and truth data independently. Default is <code>NULL</code>.</p></dd>
<dt>truth_data</dt>
<dd><p>data.frame with a column called <code>true_value</code>
on the x-axis. Usually, this will be "date", but it can be anything else.</p></dd>
<dt>merge_by</dt>
<dd><p>character vector with column names that <code>forecasts</code> and
<code>truth_data</code> should be merged on. Default is <code>NULL</code> and merge will be
attempted automatically.</p></dd>
<dt>x</dt>
<dd><p>character vector of length one that denotes the name of the variable</p></dd>
<dt>filter_truth</dt>
<dd><p>a list with character strings that are used to filter
the truth data. Every element is parsed as an expression and evaluated
in order to filter the truth data.</p></dd>
<dt>filter_forecasts</dt>
<dd><p>a list with character strings that are used to filter
the truth data. Every element is parsed as an expression and evaluated
in order to filter the forecasts data.</p></dd>
<dt>filter_both</dt>
<dd><p>same as <code>filter_truth</code> and <code>filter_forecasts</code>, but
applied to both data sets for convenience.</p></dd>
<dt>range</dt>
<dd><p>numeric vector indicating the interval ranges to plot. If 0 is
included in range, the median prediction will be shown.</p></dd>
<dt>facet_formula</dt>
<dd><p>formula for facetting in ggplot. If this is <code>NULL</code>
(the default), no facetting will take place</p></dd>
<dt>facet_wrap_or_grid</dt>
<dd><p>Use ggplot2's <code>facet_wrap</code> or
<code>facet_grid</code>? Anything other than "facet_wrap" will be interpreted as
<code>facet_grid</code>. This only takes effect if <code>facet_formula</code> is not
<code>NULL</code></p></dd>
<dt>ncol</dt>
<dd><p>Number of columns for facet wrap. Only relevant if
<code>facet_formula</code> is given and <code>facet_wrap_or_grid == "facet_wrap"</code></p></dd>
<dt>scales</dt>
<dd><p>scales argument that gets passed down to ggplot. Only necessary
if you make use of facetting. Default is "free_y"</p></dd>
<dt>allow_truth_without_pred</dt>
<dd><p>logical, whether or not
to allow instances where there is truth data, but no forecast. If <code>FALSE</code>
(the default), these get filtered out.</p></dd>
<dt>remove_from_truth</dt>
<dd><p>character vector of columns to remove from the
truth data. The reason these columns are removed is that sometimes different
models or forecasters don't cover the same periods. Removing these columns
from the truth data makes sure that nevertheless all available truth data
is plotted (instead of having different true values depending on the
period covered by a certain model).</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>ggplot object with a plot of true vs predicted values</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">example1</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="va"><a href="example_continuous.html">example_continuous</a></span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">plot_predictions</span><span class="op">(</span></span>
<span class="r-in">  <span class="va">example1</span>,</span>
<span class="r-in">  x <span class="op">=</span> <span class="st">"target_end_date"</span>,</span>
<span class="r-in">  filter_truth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="st">'target_end_date &lt;= "2021-07-22"'</span>,</span>
<span class="r-in">    <span class="st">'target_end_date &gt; "2021-05-01"'</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  filter_forecasts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="st">"model == 'EuroCOVIDhub-ensemble'"</span>,</span>
<span class="r-in">    <span class="st">'forecast_date == "2021-06-07"'</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  facet_formula <span class="op">=</span> <span class="va">location</span> <span class="op">~</span> <span class="va">target_type</span>,</span>
<span class="r-in">  range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">90</span>, <span class="fl">95</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-plt img"><img src="plot_predictions-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://followtheargument.org/" class="external-link">Nikos Bosse</a>, <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Hugo Gruson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.9000.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

    </footer></div>

  

  

  </body></html>

