<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Check forecasts — check_forecasts • scoringutils</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Check forecasts — check_forecasts"><meta property="og:description" content="Function to check the input data before running
eval_forecasts().
The data should come in one of three different formats:
A format for binary predictions (see binary_example_data)
A sample-based format for discrete or continuous predictions
(see continuous_example_data and integer_example_data)
A quantile-based format (see quantile_example_data)

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">scoringutils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/scoringutils.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/epiforecasts/scoringutils/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Check forecasts</h1>
    <small class="dont-index">Source: <a href="https://github.com/epiforecasts/scoringutils/blob/HEAD/R/check_forecasts.R" class="external-link"><code>R/check_forecasts.R</code></a></small>
    <div class="hidden name"><code>check_forecasts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to check the input data before running
<code><a href="eval_forecasts.html">eval_forecasts()</a></code>.</p>
<p>The data should come in one of three different formats:</p><ul><li><p>A format for binary predictions (see <a href="binary_example_data.html">binary_example_data</a>)</p></li>
<li><p>A sample-based format for discrete or continuous predictions
(see <a href="continuous_example_data.html">continuous_example_data</a> and <a href="integer_example_data.html">integer_example_data</a>)</p></li>
<li><p>A quantile-based format (see <a href="quantile_example_data.html">quantile_example_data</a>)</p></li>
</ul></div>

    <div class="ref-usage sourceCode"><pre class="sourceCode r"><code><span class="fu">check_forecasts</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></code></pre></div>

    <div id="ref-sections">
    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>A data.frame or similar as would be used for <code><a href="eval_forecasts.html">eval_forecasts()</a></code></p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list with elements that give information about what <code>scoringutils</code>thinks you are trying to do and potential issues.</p><ul><li><p><code>target_type</code> the type of the prediction target as inferred from the
input: 'binary', if all values in <code>true_value</code> are either 0 or 1 and values in
<code>prediction</code> are between 0 and 1, 'discrete' if all true values are integers
and 'continuous' if not.</p></li>
<li><p><code>prediction_type</code> inferred type of the prediction. 'quantile', if there is
a column called 'quantile', else 'discrete' if all values in <code>prediction</code>
are integer, else 'continuous.</p></li>
<li><p><code>forecast_unit</code> unit of a single forecast, i.e. the grouping that uniquely
defines a single forecast. This is assumed to be all
present columns apart from the following protected columns:
<code>c("prediction", "true_value", "sample", "quantile","range", "boundary")</code>.
It is important that you remove all unnecessary columns before scoring.</p></li>
<li><p><code>rows_per_forecast</code> a data.frame that shows how many rows (usually
quantiles or samples there are available per forecast. If a forecast model
has several entries, then there a forecasts with differing numbers of
quantiles / samples.</p></li>
<li><p><code>unique_values</code> A data.frame that shows how many unique values there are
present per model and column in the data. This doesn't directly show missing
values, but rather the maximum number of unique values across the whole data.</p></li>
<li><p><code>warnings</code> A vector with warnings. These can be ignored if you know what
you are doing.</p></li>
<li><p><code>errors</code> A vector with issues that will cause an error when running
<code><a href="eval_forecasts.html">eval_forecasts()</a></code>.</p></li>
<li><p><code>messages</code> A verbal explanation of the information provided above.</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Functions to move between different formats:
<code><a href="range_long_to_quantile.html">range_long_to_quantile()</a></code>, <code><a href="range_wide_to_long.html">range_wide_to_long()</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Nikos Bosse <a href="mailto:nikosbosse@gmail.com">nikosbosse@gmail.com</a></p>
    </div>
    </div>

    <div id="examples">
    <h2>Examples</h2>
    <div class="ref-examples sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiforecasts/scoringutils" class="external-link">scoringutils</a></span><span class="op">)</span></span>
<span class="r-in"><span class="va">check</span> <span class="op">&lt;-</span> <span class="fu">check_forecasts</span><span class="op">(</span><span class="va">quantile_example_data</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">check</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $target_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "integer"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $prediction_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "quantile"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $forecast_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "geography"     "value_type"    "value_desc"    "value_date"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "model"         "creation_date" "horizon"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rows_per_forecast</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 model rows_per_forecast</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:            EpiSoon                19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: DetSEIRwithNB MCMC                19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:           SIRCOVID                19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $unique_values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  model  V1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:            EpiSoon   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:            EpiSoon   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:            EpiSoon   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:            EpiSoon   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:            EpiSoon  16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:            EpiSoon   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:            EpiSoon  19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:            EpiSoon 244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:            EpiSoon   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: DetSEIRwithNB MCMC   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: DetSEIRwithNB MCMC   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: DetSEIRwithNB MCMC   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13: DetSEIRwithNB MCMC   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14: DetSEIRwithNB MCMC  34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15: DetSEIRwithNB MCMC   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16: DetSEIRwithNB MCMC  19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17: DetSEIRwithNB MCMC 516</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18: DetSEIRwithNB MCMC   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:           SIRCOVID   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:           SIRCOVID   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:           SIRCOVID   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:           SIRCOVID   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:           SIRCOVID  25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:           SIRCOVID   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25:           SIRCOVID  19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26:           SIRCOVID 399</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27:           SIRCOVID   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  model  V1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $warnings</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Some values for `prediction` are NA in the data provided"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Based on your input, scoringutils thinks:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Forecasts are for a `integer` target using a `quantile` prediction format.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The unit of a single forecast is defined by `geography`, `value_type`, `value_desc`, `value_date`, `model`, `creation_date`, `horizon`. If this is not as intended, please DELETE UNNECESSARY columns or add new ones.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rows_per_forecast shows how many rows (usually quantiles or samples are available per forecast.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $unique_values shows how many unique values there are per column per model (across the entire data).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> You should be aware of the following warnings:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Some values for `prediction` are NA in the data provided</span>
<span class="r-in"><span class="fu">check_forecasts</span><span class="op">(</span><span class="va">binary_example_data</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $target_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "binary"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $prediction_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "continuous"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $forecast_unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "value_date"    "value_type"    "geography"     "value_desc"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "model"         "creation_date" "horizon"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rows_per_forecast</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 model rows_per_forecast</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:            EpiSoon                 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: DetSEIRwithNB MCMC                 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:           SIRCOVID                 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $unique_values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  model V1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:            EpiSoon  8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:            EpiSoon  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:            EpiSoon  4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:            EpiSoon  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:            EpiSoon  6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:            EpiSoon  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:            EpiSoon 21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:            EpiSoon  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: DetSEIRwithNB MCMC  8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: DetSEIRwithNB MCMC  4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: DetSEIRwithNB MCMC  4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: DetSEIRwithNB MCMC  4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13: DetSEIRwithNB MCMC  6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14: DetSEIRwithNB MCMC  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15: DetSEIRwithNB MCMC 24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16: DetSEIRwithNB MCMC  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:           SIRCOVID  8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:           SIRCOVID  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:           SIRCOVID  4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:           SIRCOVID  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:           SIRCOVID  6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:           SIRCOVID  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:           SIRCOVID 18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:           SIRCOVID  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  model V1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $warnings</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Some values for `true_value` are NA in the data provided"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Based on your input, scoringutils thinks:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Forecasts are for a `binary` target using a `continuous` prediction format.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The unit of a single forecast is defined by `value_date`, `value_type`, `geography`, `value_desc`, `model`, `creation_date`, `horizon`. If this is not as intended, please DELETE UNNECESSARY columns or add new ones.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rows_per_forecast shows how many rows (usually quantiles or samples are available per forecast.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $unique_values shows how many unique values there are per column per model (across the entire data).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> You should be aware of the following warnings:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Some values for `true_value` are NA in the data provided</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Nikos Bosse, Sam Abbott, Hugo Gruson, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.9000.9000.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

