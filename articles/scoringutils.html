<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>scoringutils â€¢ scoringutils</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="scoringutils">
<meta property="og:description" content="scoringutils">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">scoringutils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/scoringutils.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/epiforecasts/scoringutils/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="scoringutils_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="scoringutils_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="scoringutils_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>scoringutils</h1>
                        <h4 class="author">Nikos Bosse</h4>
            
            <h4 class="date">2020-11-03</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/scoringutils/blob/master/vignettes/scoringutils.Rmd"><code>vignettes/scoringutils.Rmd</code></a></small>
      <div class="hidden name"><code>scoringutils.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The scoringutils package provides a collection of metrics and proper scoring rules that make it simple to score forecasts against the true observed values. You can either automatically score predictions using <code>eval_forecasts</code> with an appropriately shaped <code>data.frame</code> as input, or you can access the different scoring metrics directly using lower level functions.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiforecasts/scoringutils">scoringutils</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://r-datatable.com">data.table</a></span><span class="op">)</span></pre></div>
</div>
<div id="scoring-forecasts-directly" class="section level1">
<h1 class="hasAnchor">
<a href="#scoring-forecasts-directly" class="anchor"></a>Scoring Forecasts Directly</h1>
<p>A variety of metrics and scoring rules can be accessed through the <code>scoringutils</code> package.</p>
<div id="bias" class="section level2">
<h2 class="hasAnchor">
<a href="#bias" class="anchor"></a>Bias</h2>
<p>The function <code>bias</code> determines bias from predictive Monte-Carlo samples, automatically recognising whether forecasts are continuous or integer valued.</p>
<p>For continuous forecasts, Bias is measured as <span class="math display">\[B_t (P_t, x_t) = 1 - 2 \cdot (P_t (x_t))\]</span></p>
<p>where <span class="math inline">\(P_t\)</span> is the empirical cumulative distribution function of the prediction for the true value <span class="math inline">\(x_t\)</span>. Computationally, <span class="math inline">\(P_t (x_t)\)</span> is just calculated as the fraction of predictive samples for <span class="math inline">\(x_t\)</span> that are smaller than <span class="math inline">\(x_t\)</span>.</p>
<p>For integer valued forecasts, Bias is measured as</p>
<p><span class="math display">\[B_t (P_t, x_t) = 1 - (P_t (x_t) + P_t (x_t + 1))\]</span></p>
<p>to adjust for the integer nature of the forecasts. In both cases, Bias can assume values between -1 and 1 and is 0 ideally.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="co">## integer valued forecasts</span>
<span class="va">true_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html">rpois</a></span><span class="op">(</span><span class="fl">30</span>, lambda <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>
<span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html">rpois</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, lambda <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/bias.html">bias</a></span><span class="op">(</span><span class="va">true_values</span>, <span class="va">predictions</span><span class="op">)</span>
<span class="co">#&gt;  [1] -0.125 -0.915  0.000  0.330 -0.490  0.605  0.795  0.250 -0.155 -0.020</span>
<span class="co">#&gt; [11]  0.400  0.755 -0.515 -0.040  0.400  0.565  0.745 -0.195  0.195 -0.790</span>
<span class="co">#&gt; [21]  0.035  0.215 -0.115 -0.740  0.325 -0.945  0.530  0.670 -0.950  0.580</span>

<span class="co">## continuous forecasts</span>
<span class="va">true_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">30</span>, mean <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>
<span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">30</span>, mean <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/bias.html">bias</a></span><span class="op">(</span><span class="va">true_values</span>, <span class="va">predictions</span><span class="op">)</span>
<span class="co">#&gt;  [1]  0.85  0.81  0.96 -0.54 -0.23 -0.94  0.11  0.59  0.60  0.51  0.29 -0.63</span>
<span class="co">#&gt; [13]  0.06  0.15 -0.94 -0.16 -0.03 -0.97 -0.54 -0.74 -0.08  0.82 -0.40 -0.09</span>
<span class="co">#&gt; [25]  0.11  0.88 -0.59  0.56 -0.86  0.30</span></pre></div>
</div>
<div id="sharpness" class="section level2">
<h2 class="hasAnchor">
<a href="#sharpness" class="anchor"></a>Sharpness</h2>
<p>Sharpness is the ability of the model to generate predictions within a narrow range. It is a data-independent measure, and is purely a feature of the forecasts themselves.</p>
<p>Shaprness of predictive samples corresponding to one single true value is measured as the normalised median of the absolute deviation from the median of the predictive samples. For details, see <code><a href="https://rdrr.io/r/stats/mad.html">?stats::mad</a></code></p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html">rpois</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, lambda <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/sharpness.html">sharpness</a></span><span class="op">(</span><span class="va">predictions</span><span class="op">)</span>
<span class="co">#&gt;  [1] 1.4826 1.4826 1.4826 1.4826 1.4826 2.9652 2.9652 2.9652 2.9652 2.9652</span>
<span class="co">#&gt; [11] 2.9652 2.9652 2.9652 4.4478 4.4478 4.4478 4.4478 4.4478 4.4478 4.4478</span>
<span class="co">#&gt; [21] 4.4478 4.4478 4.4478 4.4478 4.4478 5.9304 5.1891 4.4478 4.4478 5.9304</span></pre></div>
</div>
<div id="calibration" class="section level2">
<h2 class="hasAnchor">
<a href="#calibration" class="anchor"></a>Calibration</h2>
<p>Calibration or reliability of forecasts is the ability of a model to correctly identify its own uncertainty in making predictions. In a model with perfect calibration, the observed data at each time point look as if they came from the predictive probability distribution at that time.</p>
<p>Equivalently, one can inspect the probability integral transform of the predictive distribution at time t,</p>
<p><span class="math display">\[u_t = F_t (x_t)\]</span></p>
<p>where <span class="math inline">\(x_t\)</span> is the observed data point at time <span class="math inline">\(t \text{ in } t_1, â€¦, t_n\)</span>, n being the number of forecasts, and <span class="math inline">\(F_t\)</span> is the (continuous) predictive cumulative probability distribution at time t. If the true probability distribution of outcomes at time t is <span class="math inline">\(G_t\)</span> then the forecasts <span class="math inline">\(F_t\)</span> are said to be ideal if <span class="math inline">\(F_t = G_t\)</span> at all times <span class="math inline">\(t\)</span>. In that case, the probabilities ut are distributed uniformly.</p>
<p>In the case of discrete outcomes such as incidence counts, the PIT is no longer uniform even when forecasts are ideal. In that case a randomised PIT can be used instead:</p>
<p><span class="math display">\[u_t = P_t(k_t) + v \cdot (P_t(k_t) - P_t(k_t - 1) )\]</span></p>
<p>where <span class="math inline">\(k_t\)</span> is the observed count, <span class="math inline">\(P_t(x)\)</span> is the predictive cumulative probability of observing incidence <span class="math inline">\(k\)</span> at time <span class="math inline">\(t\)</span>, <span class="math inline">\(P_t (-1) = 0\)</span> by definition and <span class="math inline">\(v\)</span> is standard uniform and independent of <span class="math inline">\(k\)</span>. If <span class="math inline">\(P_t\)</span> is the true cumulative probability distribution, then <span class="math inline">\(u_t\)</span> is standard uniform.</p>
<p>The function checks whether integer or continuous forecasts were provided. It then applies the (randomised) probability integral and tests the values <span class="math inline">\(u_t\)</span> for uniformity using the Anderson-Darling test.</p>
<p>As a rule of thumb, there is no evidence to suggest a forecasting model is miscalibrated if the p-value found was greater than a threshold of <span class="math inline">\(p &gt;= 0.1\)</span>, some evidence that it was miscalibrated if <span class="math inline">\(0.01 &lt; p &lt; 0.1\)</span>, and good evidence that it was miscalibrated if <span class="math inline">\(p &lt;= 0.01\)</span>. In this context it should be noted, though, that uniformity of the PIT is a necessary but not sufficient condition of calibration. It should als be noted that the test only works given sufficient samples, otherwise the Null hypothesis will often be rejected outright.</p>
</div>
<div id="continuous-ranked-probability-score-crps" class="section level2">
<h2 class="hasAnchor">
<a href="#continuous-ranked-probability-score-crps" class="anchor"></a>Continuous Ranked Probability Score (CRPS)</h2>
<p>Wrapper around the <code>crps_sample</code> function from the <code>scoringRules</code> package. For more information look at the manuals from the <code>scoringRules</code> package. The function can be used for continuous as well as integer valued forecasts. Smaller values are better.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">true_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html">rpois</a></span><span class="op">(</span><span class="fl">30</span>, lambda <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>
<span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html">rpois</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, lambda <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/crps.html">crps</a></span><span class="op">(</span><span class="va">true_values</span>, <span class="va">predictions</span><span class="op">)</span>
<span class="co">#&gt;  [1] 0.187750 0.637700 1.169275 1.194175 0.534450 0.587650 1.137525 2.648100</span>
<span class="co">#&gt;  [9] 0.802225 1.590900 1.447675 0.912025 0.793575 1.321400 2.227450 3.909250</span>
<span class="co">#&gt; [17] 1.166650 3.128350 1.376725 2.476950 2.689650 1.999700 4.690850 4.433300</span>
<span class="co">#&gt; [25] 4.824975 6.572375 1.641800 3.420100 1.316550 1.224425</span></pre></div>
</div>
<div id="dawid-sebastiani-score-dss" class="section level2">
<h2 class="hasAnchor">
<a href="#dawid-sebastiani-score-dss" class="anchor"></a>Dawid-Sebastiani Score (DSS)</h2>
<p>Wrapper around the <code>dss_sample</code> function from the <code>scoringRules</code> package. For more information look at the manuals from the <code>scoringRules</code> package. The function can be used for continuous as well as integer valued forecasts. Smaller values are better.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">true_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html">rpois</a></span><span class="op">(</span><span class="fl">30</span>, lambda <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>
<span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html">rpois</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, lambda <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/dss.html">dss</a></span><span class="op">(</span><span class="va">true_values</span>, <span class="va">predictions</span><span class="op">)</span>
<span class="co">#&gt;  [1] -0.08883118  2.41918329  2.35345215  2.61105708  3.79563074  2.08451541</span>
<span class="co">#&gt;  [7]  2.07897571  2.23947676  2.32316749  4.89711368  2.50879524  3.83415539</span>
<span class="co">#&gt; [13]  2.87894706  3.16879945  2.84204224  4.38824694  2.83399816  3.03012928</span>
<span class="co">#&gt; [19]  4.30934359  4.28286698  3.72004113  3.17701316  4.03388130  3.76093360</span>
<span class="co">#&gt; [25]  3.23995793  4.17364556  3.16378311  5.52327948  5.09327640  3.34998046</span></pre></div>
</div>
<div id="log-score" class="section level2">
<h2 class="hasAnchor">
<a href="#log-score" class="anchor"></a>Log Score</h2>
<p>Wrapper around the <code>log_sample</code> function from the <code>scoringRules</code> package. For more information look at the manuals from the <code>scoringRules</code> package. The function should not be used for integer valued forecasts. While Log Scores are in principle possible for integer valued foreasts they require a kernel density estimate which is not well defined for discrete values. Smaller values are better.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">true_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">30</span>, mean <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>
<span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, mean <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/logs.html">logs</a></span><span class="op">(</span><span class="va">true_values</span>, <span class="va">predictions</span><span class="op">)</span>
<span class="co">#&gt;  [1] 1.4569889 1.0900689 1.2287915 1.0777080 1.1246414 1.7243726 1.2327973</span>
<span class="co">#&gt;  [8] 2.4179156 3.0734245 1.0386379 1.1061996 1.0362183 2.4548391 2.1261629</span>
<span class="co">#&gt; [15] 2.3203177 1.0493911 0.9481120 1.0051131 1.1790874 1.5105691 0.9602371</span>
<span class="co">#&gt; [22] 2.6776187 0.8966441 1.1993134 1.3618015 1.0346834 1.1855467 1.4915756</span>
<span class="co">#&gt; [29] 1.8705389 1.2256181</span></pre></div>
</div>
<div id="brier-score" class="section level2">
<h2 class="hasAnchor">
<a href="#brier-score" class="anchor"></a>Brier Score</h2>
<p>The Brier score is a proper score rule that assesses the accuracy of probabilistic binary predictions. The outcomes can be either 0 or 1, the predictions must be a probability that the true outcome will be 1.</p>
<p>The Brier Score is then computed as the mean squared error between the probabilistic prediction and the true outcome.</p>
<p><span class="math display">\[\text{Brier_Score} = \frac{1}{N} \sum_{t = 1}^{n} (\text{prediction}_t - \text{outcome}_t)^2\]</span></p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">true_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">30</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>

<span class="fu"><a href="../reference/brier_score.html">brier_score</a></span><span class="op">(</span><span class="va">true_values</span>, <span class="va">predictions</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.4074522</span></pre></div>
</div>
<div id="interval-score" class="section level2">
<h2 class="hasAnchor">
<a href="#interval-score" class="anchor"></a>Interval Score</h2>
<p>The Interval Score is a Proper Scoring Rule to score quantile predictions, following Gneiting and Raftery (2007). Smaller values are better.</p>
<p>The score is computed as</p>
<p><span class="math display">\[ \text{score} = (\text{upper} - \text{lower}) + \\
\frac{2}{\alpha} \cdot (\text{lower} - \text{true_value}) \cdot 1(\text{true_values} &lt; \text{lower}) + \\
\frac{2}{\alpha} \cdot (\text{true_value} - \text{upper}) \cdot
1(\text{true_value} &gt; \text{upper})\]</span></p>
<p>where <span class="math inline">\(1()\)</span> is the indicator function and <span class="math inline">\(\alpha\)</span> is the decimal value that indicates how much is outside the prediction interval. To improve usability, the user is asked to provide an interval range in percentage terms, i.e.Â interval_range = 90 (percent) for a 90 percent prediction interval. Correspondingly, the user would have to provide the 5% and 95% quantiles (the corresponding alpha would then be 0.1). No specific distribution is assumed, but the range has to be symmetric (i.e you canâ€™t use the 0.1 quantile as the lower bound and the 0.7 quantile as the upper). Setting <code>weigh = TRUE</code> will weigh the score by <span class="math inline">\(\frac{\alpha}{2}\)</span> such that the Interval Score converges to the CRPS for increasing number of quantiles.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">true_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">30</span>, mean <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>
<span class="va">interval_range</span> <span class="op">&lt;-</span> <span class="fl">90</span>
<span class="va">alpha</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">100</span> <span class="op">-</span> <span class="va">interval_range</span><span class="op">)</span> <span class="op">/</span> <span class="fl">100</span>
<span class="va">lower</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span><span class="op">(</span><span class="va">alpha</span><span class="op">/</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">30</span>, mean <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span>
<span class="va">upper</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span><span class="op">(</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span> <span class="va">alpha</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">30</span>, mean <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../reference/interval_score.html">interval_score</a></span><span class="op">(</span>true_values <span class="op">=</span> <span class="va">true_values</span>,
               lower <span class="op">=</span> <span class="va">lower</span>,
               upper <span class="op">=</span> <span class="va">upper</span>,
               interval_range <span class="op">=</span> <span class="va">interval_range</span><span class="op">)</span>
<span class="co">#&gt;  [1] 0.2884790 0.6642666 0.1065715 0.2848289 0.7308416 0.2652937 0.1659145</span>
<span class="co">#&gt;  [8] 2.1430278 0.2485529 0.2221595 0.2587702 0.2628397 0.3749324 0.3103158</span>
<span class="co">#&gt; [15] 0.2989739 1.1018295 0.6821174 0.2890025 0.2488446 0.2941921 0.2324855</span>
<span class="co">#&gt; [22] 0.1449502 2.4120655 0.7615472 0.1726907 0.1928001 0.2449351 0.4900185</span>
<span class="co">#&gt; [29] 0.2217442 0.1842047</span></pre></div>
</div>
</div>
<div id="automatically-scoring-forecasts" class="section level1">
<h1 class="hasAnchor">
<a href="#automatically-scoring-forecasts" class="anchor"></a>Automatically Scoring Forecasts</h1>
<p>The function <code>eval_forecasts</code> automatically scores forecasts. As input you need a <code>data.frame</code> with your predictions. You can use the argument <code>by</code> to specify variables over which to group. If you e.g.Â have one to seven-day-ahead forecasts in three locations made by two different models, you would specify <code>by = c("model", "horizon", "location")</code>. If you want to average over horizons, but not locations, you would specify <code>by = c("model", "horizon")</code>. If you donâ€™t want any groping, you can specify <code>by = NULL</code>. The default grouping variable is <code>"model"</code>. Note that the variables to group over need to be present as columns in the data.</p>
<p>If you want to have one score per observation, you can call the function with the argument <code>summarised = FALSE</code>. The default is <code>summarised = TRUE</code> and the function returns one aggregate score per grouping unit. For more information see <code><a href="../reference/eval_forecasts.html">?eval_forecasts</a></code>.</p>
<p>You can pass down arguments to lower-level functions using <code>...</code>. This could be useful if you e.g.Â want to weigh the interval score with the argument <code>weigh = TRUE</code>.</p>
<div id="scoring-probability-binary-forecasts" class="section level2">
<h2 class="hasAnchor">
<a href="#scoring-probability-binary-forecasts" class="anchor"></a>Scoring Probability Binary Forecasts</h2>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://r-datatable.com">data.table</a></span><span class="op">)</span>

<span class="co"># load example data</span>
<span class="va">binary_example</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT</a></span><span class="op">(</span><span class="fu">scoringutils</span><span class="fu">::</span><span class="va"><a href="../reference/binary_example_data.html">binary_example_data</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">binary_example</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;      id  model horizon  prediction true_value</span>
<span class="co">#&gt;   1:  1 model1       1 0.745690691          0</span>
<span class="co">#&gt;   2:  1 model1       2 0.521983484          0</span>
<span class="co">#&gt;   3:  1 model2       1 0.009581771          0</span>
<span class="co">#&gt;  ---                                         </span>
<span class="co">#&gt; 118: 30 model1       2 0.365684017          0</span>
<span class="co">#&gt; 119: 30 model2       1 0.619222498          0</span>
<span class="co">#&gt; 120: 30 model2       2 0.433455748          0</span></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="co"># score forecasts</span>
<span class="va">eval</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="va">binary_example</span>, 
                                     by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span>, 
                                     summarise_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eval</span><span class="op">)</span>
<span class="co">#&gt;     model brier_score</span>
<span class="co">#&gt; 1: model1   0.3648722</span>
<span class="co">#&gt; 2: model2   0.3228463</span></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="va">eval</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="va">binary_example</span>, 
                                     by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>,<span class="st">"horizon"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eval</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;       model id horizon  brier_score</span>
<span class="co">#&gt;   1: model1  1       1 5.560546e-01</span>
<span class="co">#&gt;   2: model1  1       2 2.724668e-01</span>
<span class="co">#&gt;   3: model2  1       1 9.181033e-05</span>
<span class="co">#&gt;  ---                               </span>
<span class="co">#&gt; 118: model1 30       2 1.337248e-01</span>
<span class="co">#&gt; 119: model2 30       1 3.834365e-01</span>
<span class="co">#&gt; 120: model2 30       2 1.878839e-01</span></pre></div>
</div>
<div id="scoring-quantile-forecasts" class="section level2">
<h2 class="hasAnchor">
<a href="#scoring-quantile-forecasts" class="anchor"></a>Scoring Quantile Forecasts</h2>
<p>Forecasts can be provided in either long or wide format</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="va">quantile_example</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT</a></span><span class="op">(</span><span class="fu">scoringutils</span><span class="fu">::</span><span class="va"><a href="../reference/quantile_example_data_long.html">quantile_example_data_long</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">quantile_example</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;      true_value id  model prediction boundary range horizon</span>
<span class="co">#&gt;   1:   2.659261  1 model1 -0.6448536    lower    90       1</span>
<span class="co">#&gt;   2:   2.659261  1 model1  0.3255102    lower    50       1</span>
<span class="co">#&gt;   3:   2.659261  1 model1  1.0000000    lower     0       1</span>
<span class="co">#&gt;  ---                                                       </span>
<span class="co">#&gt; 718:  30.189608 30 model2 31.3873685    upper    90       2</span>
<span class="co">#&gt; 719:  30.189608 30 model2 30.6399809    upper    50       2</span>
<span class="co">#&gt; 720:  30.189608 30 model2 31.2576984    upper     0       2</span>

<span class="va">quantile_example</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT</a></span><span class="op">(</span><span class="fu">scoringutils</span><span class="fu">::</span><span class="va"><a href="../reference/quantile_example_data_wide.html">quantile_example_data_wide</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">quantile_example</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;      true_value id  model horizon   lower_0   lower_50   lower_90    upper_0</span>
<span class="co">#&gt;   1:   2.659261  1 model1       1  1.000000  0.3255102 -0.6448536  1.0000000</span>
<span class="co">#&gt;   2:   2.659261  1 model1       2  1.761427 -1.0756255  0.6142077  0.9463843</span>
<span class="co">#&gt;   3:   0.822062  2 model1       1  2.000000  1.3255102  0.3551464  2.0000000</span>
<span class="co">#&gt;  ---                                                                        </span>
<span class="co">#&gt; 118:  29.446186 29 model2       2 29.750094 28.6346711 27.5081858 29.7113944</span>
<span class="co">#&gt; 119:  30.189608 30 model2       1 30.100000 29.4255102 28.4551464 30.1000000</span>
<span class="co">#&gt; 120:  30.189608 30 model2       2 31.224235 29.1650518 28.2025709 31.2576984</span>
<span class="co">#&gt;       upper_50  upper_90</span>
<span class="co">#&gt;   1:  1.674490  2.644854</span>
<span class="co">#&gt;   2:  2.643041  2.354494</span>
<span class="co">#&gt;   3:  2.674490  3.644854</span>
<span class="co">#&gt;  ---                    </span>
<span class="co">#&gt; 118: 29.148724 30.393116</span>
<span class="co">#&gt; 119: 30.774490 31.744854</span>
<span class="co">#&gt; 120: 30.639981 31.387368</span></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="va">eval</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="va">quantile_example</span>, 
                                     by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span>, 
                                     summarise_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"range"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eval</span><span class="op">)</span>
<span class="co">#&gt;     model range interval_score    sharpness underprediction overprediction</span>
<span class="co">#&gt; 1: model1     0      0.8879926  0.065132463     0.300326488     0.52253362</span>
<span class="co">#&gt; 2: model1    50      0.7760589  0.304421447     0.179681560     0.29195591</span>
<span class="co">#&gt; 3: model1    90      0.2658170  0.152391127     0.024935181     0.08849074</span>
<span class="co">#&gt; 4: model2     0      0.9215835 -0.003467508     0.298074288     0.62697674</span>
<span class="co">#&gt; 5: model2    50      0.6787509  0.356631485     0.072721303     0.24939811</span>
<span class="co">#&gt; 6: model2    90      0.2721723  0.160614315     0.008071852     0.10348616</span>
<span class="co">#&gt;      coverage coverage_deviation      bias        ae quantile_coverage</span>
<span class="co">#&gt; 1: 0.11666667         0.11666667 0.1912281 0.8269027         0.5500000</span>
<span class="co">#&gt; 2: 0.40000000        -0.10000000 0.1912281 1.0804804         0.5916667</span>
<span class="co">#&gt; 3: 0.81666667        -0.08333333 0.1912281 1.6373372         0.5416667</span>
<span class="co">#&gt; 4: 0.08333333         0.08333333 0.2771930 0.9779030         0.6166667</span>
<span class="co">#&gt; 5: 0.53333333         0.03333333 0.2771930 1.0353824         0.6000000</span>
<span class="co">#&gt; 6: 0.85000000        -0.05000000 0.2771930 1.7177012         0.5666667</span></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="va">eval</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="va">quantile_example</span>, 
                                     by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eval</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;       model id horizon interval_score sharpness underprediction overprediction</span>
<span class="co">#&gt;   1: model1  1       1      0.9322161 0.2006921      0.73152398     0.00000000</span>
<span class="co">#&gt;   2: model1  1       2      0.7961387 0.3251682      0.47097053     0.00000000</span>
<span class="co">#&gt;   3: model1  2       1      0.6376590 0.2006921      0.00000000     0.43696691</span>
<span class="co">#&gt;  ---                                                                          </span>
<span class="co">#&gt; 118: model2 29       2      0.2850003 0.1052339      0.11898478     0.06078162</span>
<span class="co">#&gt; 119: model2 30       1      0.2186137 0.2006921      0.01792164     0.00000000</span>
<span class="co">#&gt; 120: model2 30       2      0.4214606 0.2145352      0.00000000     0.20692541</span>
<span class="co">#&gt;      coverage coverage_deviation bias       ae quantile_coverage</span>
<span class="co">#&gt;   1:      0.0              -0.56 -1.0 1.659261               0.0</span>
<span class="co">#&gt;   2:      0.0              -0.56 -1.0 1.399753               0.0</span>
<span class="co">#&gt;   3:      0.4              -0.16  0.9 1.364704               0.8</span>
<span class="co">#&gt;  ---                                                            </span>
<span class="co">#&gt; 118:      0.4              -0.16  0.5 0.859563               0.4</span>
<span class="co">#&gt; 119:      0.8               0.24 -0.5 0.945659               0.4</span>
<span class="co">#&gt; 120:      0.8               0.24  0.5 1.138871               0.6</span></pre></div>
</div>
<div id="scoring-integer-forecasts" class="section level2">
<h2 class="hasAnchor">
<a href="#scoring-integer-forecasts" class="anchor"></a>Scoring Integer Forecasts</h2>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="va">integer_example</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT</a></span><span class="op">(</span><span class="fu">scoringutils</span><span class="fu">::</span><span class="va"><a href="../reference/integer_example_data.html">integer_example_data</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">integer_example</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;       id  model true_value sample prediction horizon</span>
<span class="co">#&gt;    1:  1 model1          6      1          5       1</span>
<span class="co">#&gt;    2:  1 model1          6      2          4       1</span>
<span class="co">#&gt;    3:  1 model1          6      3          3       1</span>
<span class="co">#&gt;   ---                                               </span>
<span class="co">#&gt; 5998: 30 model2          2     48          5       2</span>
<span class="co">#&gt; 5999: 30 model2          2     49          4       2</span>
<span class="co">#&gt; 6000: 30 model2          2     50          6       2</span></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="va">eval</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="va">integer_example</span>, 
                                     by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span>, 
                                     summarise_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"horizon"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eval</span><span class="op">)</span>
<span class="co">#&gt;    horizon sharpness         bias      dss      crps pit_p_val pit_sd</span>
<span class="co">#&gt; 1:       1   1.43318 -0.007333333 1.904912 0.8381600     1e-05      0</span>
<span class="co">#&gt; 2:       2   1.53202  0.185333333 1.851858 0.8470867     1e-05      0</span></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="va">eval</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="va">integer_example</span>, 
                                     by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; In order to compute PIT values, 'summarise_by' must be different from 'by'</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eval</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;       model id horizon sharpness  bias       dss   crps pit_p_val pit_sd</span>
<span class="co">#&gt;   1: model1  1       1    1.4826 -0.62 1.1168405 0.6444       NaN    NaN</span>
<span class="co">#&gt;   2: model1  1       2    1.4826 -0.32 1.0191428 0.3800       NaN    NaN</span>
<span class="co">#&gt;   3: model2  1       1    1.4826 -0.48 0.6288598 0.4156       NaN    NaN</span>
<span class="co">#&gt;  ---                                                                    </span>
<span class="co">#&gt; 118: model1 30       2    1.4826  0.96 6.0858760 2.8192       NaN    NaN</span>
<span class="co">#&gt; 119: model2 30       1    1.4826  0.96 6.0791013 2.2892       NaN    NaN</span>
<span class="co">#&gt; 120: model2 30       2    1.4826  1.00 6.1867623 2.8552       NaN    NaN</span></pre></div>
</div>
<div id="scoring-continuous-forecasts" class="section level2">
<h2 class="hasAnchor">
<a href="#scoring-continuous-forecasts" class="anchor"></a>Scoring Continuous Forecasts</h2>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="va">continuous_example</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT</a></span><span class="op">(</span><span class="fu">scoringutils</span><span class="fu">::</span><span class="va"><a href="../reference/continuous_example_data.html">continuous_example_data</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">continuous_example</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;       id  model  true_value sample   prediction horizon</span>
<span class="co">#&gt;    1:  1 model1  0.03007379      1 -0.203426069       1</span>
<span class="co">#&gt;    2:  1 model1  0.03007379      2  0.007621269       1</span>
<span class="co">#&gt;    3:  1 model1  0.03007379      3 -2.086657003       1</span>
<span class="co">#&gt;   ---                                                  </span>
<span class="co">#&gt; 5998: 30 model2 -2.93749990     48 -0.079900522       2</span>
<span class="co">#&gt; 5999: 30 model2 -2.93749990     49 -1.178524017       2</span>
<span class="co">#&gt; 6000: 30 model2 -2.93749990     50  0.638750918       2</span></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="va">eval</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="va">continuous_example</span>, 
                                     by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span>, 
                                     summarise_by <span class="op">=</span> <span class="st">"model"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eval</span><span class="op">)</span>
<span class="co">#&gt;     model log_score sharpness       bias      dss      crps pit_p_val pit_sd</span>
<span class="co">#&gt; 1: model1  1.761008  1.176009 0.02533333 1.648494 0.7603090     1e-05    NaN</span>
<span class="co">#&gt; 2: model2  1.795614  1.176819 0.10200000 1.623213 0.7633677     1e-05    NaN</span></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit">
<span class="va">eval</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="va">continuous_example</span>, 
                                     by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; In order to compute PIT values, 'summarise_by' must be different from 'by'</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eval</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;       model id horizon log_score sharpness  bias         dss      crps</span>
<span class="co">#&gt;   1: model1  1       1  1.093753 1.1283071  0.04 -0.08898351 0.2580341</span>
<span class="co">#&gt;   2: model1  1       2  1.349629 1.2956109  0.28  0.95841907 0.4086111</span>
<span class="co">#&gt;   3: model2  1       1  1.087163 1.0705271 -0.04  0.07987778 0.2556484</span>
<span class="co">#&gt;  ---                                                                  </span>
<span class="co">#&gt; 118: model1 30       2  3.354443 1.5685235  0.96  6.70942158 2.7614870</span>
<span class="co">#&gt; 119: model2 30       1  3.107910 0.9985101  0.96  6.58413707 2.3375785</span>
<span class="co">#&gt; 120: model2 30       2  4.638794 1.3175408  1.00  6.57095652 2.8273520</span>
<span class="co">#&gt;      pit_p_val pit_sd</span>
<span class="co">#&gt;   1:       NaN    NaN</span>
<span class="co">#&gt;   2:       NaN    NaN</span>
<span class="co">#&gt;   3:       NaN    NaN</span>
<span class="co">#&gt;  ---                 </span>
<span class="co">#&gt; 118:       NaN    NaN</span>
<span class="co">#&gt; 119:       NaN    NaN</span>
<span class="co">#&gt; 120:       NaN    NaN</span></pre></div>
</div>
</div>
<div id="plotting-scores" class="section level1">
<h1 class="hasAnchor">
<a href="#plotting-scores" class="anchor"></a>Plotting Scores</h1>
<p>A few default plots are available in the scoringutils package.</p>
<div id="create-coloured-table-of-scores" class="section level2">
<h2 class="hasAnchor">
<a href="#create-coloured-table-of-scores" class="anchor"></a>Create coloured table of scores</h2>
<div class="sourceCode" id="cb21"><pre class="downlit">
<span class="va">scores</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="fu">scoringutils</span><span class="fu">::</span><span class="va"><a href="../reference/quantile_example_data_wide.html">quantile_example_data_wide</a></span>,
                                       by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span>,
                                       summarise_by <span class="op">=</span> <span class="st">"model"</span><span class="op">)</span>
<span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/score_table.html">score_table</a></span><span class="op">(</span><span class="va">scores</span><span class="op">)</span></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-22-1.png" width="672"></p>
</div>
<div id="show-correlation-between-metrics" class="section level2">
<h2 class="hasAnchor">
<a href="#show-correlation-between-metrics" class="anchor"></a>Show correlation between metrics</h2>
<div class="sourceCode" id="cb22"><pre class="downlit">
<span class="va">scores</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="fu">scoringutils</span><span class="fu">::</span><span class="va"><a href="../reference/quantile_example_data_wide.html">quantile_example_data_wide</a></span>,
                                       by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span>,
                                       summarise_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/correlation_plot.html">correlation_plot</a></span><span class="op">(</span><span class="va">scores</span><span class="op">)</span></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-23-1.png" width="672"></p>
</div>
<div id="show-components-of-the-weighted-interval-score" class="section level2">
<h2 class="hasAnchor">
<a href="#show-components-of-the-weighted-interval-score" class="anchor"></a>Show components of the weighted interval score</h2>
<div class="sourceCode" id="cb23"><pre class="downlit">
<span class="va">scores</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="fu">scoringutils</span><span class="fu">::</span><span class="va"><a href="../reference/quantile_example_data_wide.html">quantile_example_data_wide</a></span>,
                                       by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span>,
                                       summarise_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"horizon"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/wis_components.html">wis_components</a></span><span class="op">(</span><span class="va">scores</span>, x <span class="op">=</span> <span class="st">"model"</span>, facet_formula <span class="op">=</span> <span class="op">~</span> <span class="va">horizon</span><span class="op">)</span></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-24-1.png" width="672"></p>
</div>
<div id="range-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#range-plots" class="anchor"></a>Range plots</h2>
<div class="sourceCode" id="cb24"><pre class="downlit">
<span class="va">scores</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="fu">scoringutils</span><span class="fu">::</span><span class="va"><a href="../reference/quantile_example_data_long.html">quantile_example_data_long</a></span>,
                                       by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span>,
                                       summarise_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"horizon"</span>, <span class="st">"range"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/range_plot.html">range_plot</a></span><span class="op">(</span><span class="va">scores</span>, x <span class="op">=</span> <span class="st">"model"</span><span class="op">)</span></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-25-1.png" width="672"></p>
<div class="sourceCode" id="cb25"><pre class="downlit">
<span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/range_plot.html">range_plot</a></span><span class="op">(</span><span class="va">scores</span>, y <span class="op">=</span> <span class="st">"sharpness"</span>, x <span class="op">=</span> <span class="st">"model"</span><span class="op">)</span></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-26-1.png" width="672"></p>
</div>
<div id="heatmap-of-scores" class="section level2">
<h2 class="hasAnchor">
<a href="#heatmap-of-scores" class="anchor"></a>Heatmap of scores</h2>
<div class="sourceCode" id="cb26"><pre class="downlit">
<span class="va">scores</span> <span class="op">&lt;-</span> <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/eval_forecasts.html">eval_forecasts</a></span><span class="op">(</span><span class="fu">scoringutils</span><span class="fu">::</span><span class="va"><a href="../reference/quantile_example_data_long.html">quantile_example_data_long</a></span>,
                                       by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"id"</span>, <span class="st">"horizon"</span><span class="op">)</span>,
                                       summarise_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"horizon"</span><span class="op">)</span><span class="op">)</span>

<span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="../reference/score_heatmap.html">score_heatmap</a></span><span class="op">(</span><span class="va">scores</span>, x <span class="op">=</span> <span class="st">"horizon"</span>, metric <span class="op">=</span> <span class="st">"bias"</span><span class="op">)</span></pre></div>
<p><img src="scoringutils_files/figure-html/unnamed-chunk-27-1.png" width="672"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Nikos Bosse, Sam Abbott, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
