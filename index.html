<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Utilities for Scoring and Assessing Predictions • scoringutils</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Utilities for Scoring and Assessing Predictions">
<meta property="og:description" content="
    Combines a collection of metrics and proper scoring rules 
    (Tilmann Gneiting &amp; Adrian E Raftery (2007) 
    &lt;doi:10.1198/016214506000001437&gt;) with an easy to
    use wrapper that can be used to automatically evaluate predictions. 
    Apart from proper scoring rules functions are provided to assess bias, 
    sharpness and calibration (Sebastian Funk, Anton Camacho, Adam J. Kucharski, 
    Rachel Lowe, Rosalind M. Eggo, W. John Edmunds (2019) 
    &lt;doi:10.1371/journal.pcbi.1006785&gt;) of forecasts. 
    Several types of predictions can be evaluated: 
    probabilistic forecasts (generally 
    predictive samples generated by Markov Chain Monte Carlo procedures), 
    quantile forecasts or point forecasts. Observed values and predictions
    can be either continuous, integer, or binary. Users can either choose 
    to apply these rules separately in a vector / matrix format that can 
    be flexibly used within other packages, or they can choose to do an 
    automatic evaluation of their forecasts. This is implemented with
    data.table and provides a consistent and very efficient framework for 
    evaluating various types of predictions. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">scoringutils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/scoringutils.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/epiforecasts/scoringutils/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="scoringutils-utilities-for-scoring-and-assessing-predictions" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#scoringutils-utilities-for-scoring-and-assessing-predictions" class="anchor"></a>scoringutils: Utilities for Scoring and Assessing Predictions</h1></div>

<p>The scoringutils package provides a collection of metrics and proper scoring rules that make it simple to score forecasts against the true observed values.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The stable version of <code>scoringutils</code> is on CRAN, but is outdated now. We do not recommend using it. Please install the current development version from github using</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"epiforecasts/scoringutils"</span>)</span></code></pre></div>
</div>
<div id="functionality" class="section level2">
<h2 class="hasAnchor">
<a href="#functionality" class="anchor"></a>Functionality</h2>
<p>Predictions can either be automatically scored from a <code>data.frame</code> using the function <code>eval_forecasts</code>. Alternatively, evaluation metrics can be accessed directly using lower level functions within a vector/matrix framework.</p>
<p>Predictions can be handled in various formats: <code>scoringutils</code> can handle probabilistic forecasts in either a sample based or a quantile based format. For more detail on the expected input formats please see below. True values can be integer, continuous or binary.</p>
<p>In addition to automatic scoring, <code>scoringutils</code> offers a variety of plots and visualisations.</p>
</div>
<div id="scoring-forecasts-automatically" class="section level2">
<h2 class="hasAnchor">
<a href="#scoring-forecasts-automatically" class="anchor"></a>Scoring Forecasts Automatically</h2>
<p>Most of the time, the <code>eval_forecasts</code> function will be able to do the entire evaluation for you. The idea is simple, yet flexible.</p>
<p>All you need to do is to pass in a <code>data.frame</code> that has a column called <code>prediction</code> and one called <code>true_value</code>. Depending on the exact input format, additional columns like <code>sample</code>, <code>quantile</code> or <code>range</code> and <code>boundary</code> are needed. Additional columns may be present to indicate a grouping of forecasts. For example, we could have forecasts made by different models in various locations at different time points, each for several weeks into the future. In this case, we would have additional columns called for example <code>model</code>, <code>date</code>, <code>forecast_date</code>, <code>forecast_horizon</code> and <code>location</code>.</p>
<p>Using the <code>by</code> argument you need to specify the <em>unit of a single forecast</em>. In this example here we would set <code>by = c("model", "date", "forecast_date", "forecast_horizon", "location")</code> (note: if we want to be pedantic, there is a small duplication as the information of “date” is already included in the combination of “forecast_date” and “forecast_horizon”. But as long as there isn’t some weird shift, this doesn’t matter for the purpose of grouping our observations). If you don’t specify <code>by</code> (i.e. <code>by = NULL</code>), <code>scoringutils</code> will automatically use all appropriate present columns. Note that you don’t need to include columns such as <code>quantile</code> or <code>sample</code> in the <code>by</code> argument, as several quantiles / samples make up one forecast.</p>
<p>Using the <code>summarise_by</code> argument you can now choose categories to aggregate over. If you were only interested in scores for the different models, you would specify <code>summarise_by = c("model")</code>. If you wanted to have scores for every model in every location, you would need to specify <code>summarise_by = c("model", "location")</code>. If you wanted to have one score per quantile or one per prediction interval range, you could specify something like <code>summarise_by = c("model", "quantile")</code> or <code>summarise_by = c("model", "quantile", "range")</code> (note again that some information is duplicated in quantile and range, but this doesn’t really matter for grouping purposes). When aggregating, <code>eval_forecasts</code> takes the mean according to the group defined in <code>summarise_by</code> (i.e. in this example, if <code>summarise_by = c("model", "location")</code>, scores will be averaged over all forecast dates, forecast horizons and quantiles to yield one score per model and location). In addition to the mean, you can also obtain the standard deviation of the scores over which you average or any desired quantile (e.g. the median in addition to the mean) by specifying <code>sd = TRUE</code> and <code>quantiles = c(0.5)</code>.</p>
</div>
<div id="example-evaluation" class="section level2">
<h2 class="hasAnchor">
<a href="#example-evaluation" class="anchor"></a>Example Evaluation</h2>
<p>Here is an example of an evaluation using toy data:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>data &lt;-<span class="st"> </span>scoringutils<span class="op">::</span>quantile_example_data_plain</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">print</span>(data, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">##      true_value id  model prediction horizon quantile</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">##   1:   2.659261  1 model1 -0.6448536       1     0.05</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">##   2:   2.659261  1 model1  0.3255102       1     0.25</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">##   3:   2.659261  1 model1  1.0000000       1     0.50</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">##  ---                                                 </span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">## 598:  30.189608 30 model2 31.2242353       2     0.50</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">## 599:  30.189608 30 model2 31.3873685       2     0.95</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">## 600:  30.189608 30 model2 30.6399809       2     0.75</span></span>
<span id="cb2-12"><a href="#cb2-12"></a></span>
<span id="cb2-13"><a href="#cb2-13"></a>scoringutils<span class="op">::</span><span class="kw">eval_forecasts</span>(data, </span>
<span id="cb2-14"><a href="#cb2-14"></a>                             <span class="dt">summarise_by =</span> <span class="kw">c</span>(<span class="st">"model"</span>, <span class="st">"quantile"</span>, <span class="st">"range"</span>))</span>
<span id="cb2-15"><a href="#cb2-15"></a></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co">##      model quantile range interval_score sharpness underprediction</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co">##  1: model1     0.50     0      0.8269027 0.0000000     0.304369095</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co">##  2: model1     0.25    50      0.7760589 0.3044214     0.179681560</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co">##  3: model1     0.75    50      0.7760589 0.3044214     0.179681560</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="co">##  4: model1     0.05    90      0.2658170 0.1523911     0.024935181</span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="co">##  5: model1     0.95    90      0.2658170 0.1523911     0.024935181</span></span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="co">##  6: model2     0.50     0      0.9779030 0.0000000     0.350926228</span></span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="co">##  7: model2     0.25    50      0.6787509 0.3566315     0.072721303</span></span>
<span id="cb2-24"><a href="#cb2-24"></a><span class="co">##  8: model2     0.75    50      0.6787509 0.3566315     0.072721303</span></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="co">##  9: model2     0.05    90      0.2721723 0.1606143     0.008071852</span></span>
<span id="cb2-26"><a href="#cb2-26"></a><span class="co">## 10: model2     0.95    90      0.2721723 0.1606143     0.008071852</span></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="co">##     overprediction  coverage coverage_deviation      bias        ae</span></span>
<span id="cb2-28"><a href="#cb2-28"></a><span class="co">##  1:     0.52253362 0.0000000         0.00000000 0.1566667 0.8269027</span></span>
<span id="cb2-29"><a href="#cb2-29"></a><span class="co">##  2:     0.29195591 0.4000000        -0.10000000 0.1566667 1.0557020</span></span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="co">##  3:     0.29195591 0.4000000        -0.10000000 0.1566667 1.1052588</span></span>
<span id="cb2-31"><a href="#cb2-31"></a><span class="co">##  4:     0.08849074 0.8166667        -0.08333333 0.1566667 1.4575565</span></span>
<span id="cb2-32"><a href="#cb2-32"></a><span class="co">##  5:     0.08849074 0.8166667        -0.08333333 0.1566667 1.8171179</span></span>
<span id="cb2-33"><a href="#cb2-33"></a><span class="co">##  6:     0.62697674 0.0000000         0.00000000 0.2233333 0.9779030</span></span>
<span id="cb2-34"><a href="#cb2-34"></a><span class="co">##  7:     0.24939811 0.5333333         0.03333333 0.2233333 0.8272041</span></span>
<span id="cb2-35"><a href="#cb2-35"></a><span class="co">##  8:     0.24939811 0.5333333         0.03333333 0.2233333 1.2435606</span></span>
<span id="cb2-36"><a href="#cb2-36"></a><span class="co">##  9:     0.10348616 0.8500000        -0.05000000 0.2233333 1.4528032</span></span>
<span id="cb2-37"><a href="#cb2-37"></a><span class="co">## 10:     0.10348616 0.8500000        -0.05000000 0.2233333 1.9825992</span></span>
<span id="cb2-38"><a href="#cb2-38"></a><span class="co">##     quantile_coverage</span></span>
<span id="cb2-39"><a href="#cb2-39"></a><span class="co">##  1:         0.5500000</span></span>
<span id="cb2-40"><a href="#cb2-40"></a><span class="co">##  2:         0.4000000</span></span>
<span id="cb2-41"><a href="#cb2-41"></a><span class="co">##  3:         0.7833333</span></span>
<span id="cb2-42"><a href="#cb2-42"></a><span class="co">##  4:         0.1333333</span></span>
<span id="cb2-43"><a href="#cb2-43"></a><span class="co">##  5:         0.9500000</span></span>
<span id="cb2-44"><a href="#cb2-44"></a><span class="co">##  6:         0.6166667</span></span>
<span id="cb2-45"><a href="#cb2-45"></a><span class="co">##  7:         0.3333333</span></span>
<span id="cb2-46"><a href="#cb2-46"></a><span class="co">##  8:         0.8666667</span></span>
<span id="cb2-47"><a href="#cb2-47"></a><span class="co">##  9:         0.1500000</span></span>
<span id="cb2-48"><a href="#cb2-48"></a><span class="co">## 10:         0.9833333</span></span></code></pre></div>
<p>Using an appropriate level of summary, we can easily use the output for visualisation. The <code>scoringutils</code> package offers some built-in functions to help get a sense of the data</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>scoringutils<span class="op">::</span><span class="kw">plot_predictions</span>(data, <span class="dt">x =</span> <span class="st">"id"</span>, <span class="dt">range =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">90</span>), </span>
<span id="cb3-2"><a href="#cb3-2"></a>                               <span class="dt">facet_formula =</span> <span class="op">~</span><span class="st"> </span>model)</span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-2-1.png"><!-- --></p>
<p>(The data is just randomly generated values. We plan to add real example data to make these illustrations more useful in the future)</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>scores &lt;-<span class="st"> </span>scoringutils<span class="op">::</span><span class="kw">eval_forecasts</span>(data, </span>
<span id="cb4-2"><a href="#cb4-2"></a>                             <span class="dt">summarise_by =</span> <span class="kw">c</span>(<span class="st">"model"</span>))</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a>scoringutils<span class="op">::</span><span class="kw">score_table</span>(scores)</span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-3-1.png"><!-- --></p>
<p>Given this level of aggregation, not all metrics may make sense. In this case, for example, averaging over different quantiles to compute quantile coverage does not make much sense. If you like, you can select specific metrics for the visualisation.</p>
<p>Let us look at calibration:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>scores &lt;-<span class="st"> </span>scoringutils<span class="op">::</span><span class="kw">eval_forecasts</span>(data, </span>
<span id="cb5-2"><a href="#cb5-2"></a>                             <span class="dt">summarise_by =</span> <span class="kw">c</span>(<span class="st">"model"</span>, <span class="st">"range"</span>))</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a>scoringutils<span class="op">::</span><span class="kw">interval_coverage</span>(scores) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggtitle</span>(<span class="st">"Interval Coverage"</span>)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a>scoringutils<span class="op">::</span><span class="kw">quantile_coverage</span>(data) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggtitle</span>(<span class="st">"Quantile Coverage"</span>)</span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-4-1.png" width="50%"><img src="reference/figures/unnamed-chunk-4-2.png" width="50%"></p>
<p>Let us look at the individual components of the weighted interval score:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>scores &lt;-<span class="st"> </span>scoringutils<span class="op">::</span><span class="kw">eval_forecasts</span>(data, </span>
<span id="cb6-2"><a href="#cb6-2"></a>                             <span class="dt">summarise_by =</span> <span class="kw">c</span>(<span class="st">"model"</span>))</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a>scoringutils<span class="op">::</span><span class="kw">wis_components</span>(scores)</span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-5-1.png"><!-- --></p>
<p>We can also look at contributions to different metrics by range:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>scores &lt;-<span class="st"> </span>scoringutils<span class="op">::</span><span class="kw">eval_forecasts</span>(data, </span>
<span id="cb7-2"><a href="#cb7-2"></a>                             <span class="dt">summarise_by =</span> <span class="kw">c</span>(<span class="st">"model"</span>, <span class="st">"range"</span>))</span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a>scoringutils<span class="op">::</span><span class="kw">range_plot</span>(scores, <span class="dt">y =</span> <span class="st">"interval_score"</span>)</span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-6-1.png"><!-- --></p>
<p>We can also visualise metrics using a heatmap:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>scores &lt;-<span class="st"> </span>scoringutils<span class="op">::</span><span class="kw">eval_forecasts</span>(data, </span>
<span id="cb8-2"><a href="#cb8-2"></a>                             <span class="dt">summarise_by =</span> <span class="kw">c</span>(<span class="st">"model"</span>, <span class="st">"horizon"</span>))</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a>scoringutils<span class="op">::</span><span class="kw">score_heatmap</span>(scores <span class="op">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="st">                              </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">horizon =</span> <span class="kw">as.factor</span>(horizon)), </span>
<span id="cb8-6"><a href="#cb8-6"></a>                            <span class="dt">x =</span> <span class="st">"horizon"</span>, <span class="dt">metric =</span> <span class="st">"bias"</span>)</span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-7-1.png"><!-- --></p>
<p>For an applied example using real data, have look at a <a href="https://github.com/nikosbosse/forecast-report">preliminary evaluation of models from the German Forecast Hub</a>.</p>
<div id="expected-input-formats" class="section level3">
<h3 class="hasAnchor">
<a href="#expected-input-formats" class="anchor"></a>Expected Input Formats</h3>
<p>The <code>eval_forecasts</code> function is designed to work with various different input formats. The following formats are currently supported:</p>
<p>quantile forecasts in eiher a plain quantile format or in a format that specifies interval ranges and the boundary of a given interval range.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">print</span>(scoringutils<span class="op">::</span>quantile_example_data_plain, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">##      true_value id  model prediction horizon quantile</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">##   1:   2.659261  1 model1 -0.6448536       1     0.05</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co">##   2:   2.659261  1 model1  0.3255102       1     0.25</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co">##   3:   2.659261  1 model1  1.0000000       1     0.50</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">##  ---                                                 </span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">## 598:  30.189608 30 model2 31.2242353       2     0.50</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">## 599:  30.189608 30 model2 31.3873685       2     0.95</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">## 600:  30.189608 30 model2 30.6399809       2     0.75</span></span>
<span id="cb9-11"><a href="#cb9-11"></a></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="kw">print</span>(scoringutils<span class="op">::</span>quantile_example_data_long, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb9-13"><a href="#cb9-13"></a></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co">##      true_value id  model prediction boundary range horizon</span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co">##   1:   2.659261  1 model1 -0.6448536    lower    90       1</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co">##   2:   2.659261  1 model1  0.3255102    lower    50       1</span></span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="co">##   3:   2.659261  1 model1  1.0000000    lower     0       1</span></span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="co">##  ---                                                       </span></span>
<span id="cb9-19"><a href="#cb9-19"></a><span class="co">## 718:  30.189608 30 model2 31.3873685    upper    90       2</span></span>
<span id="cb9-20"><a href="#cb9-20"></a><span class="co">## 719:  30.189608 30 model2 30.6399809    upper    50       2</span></span>
<span id="cb9-21"><a href="#cb9-21"></a><span class="co">## 720:  30.189608 30 model2 31.2576984    upper     0       2</span></span></code></pre></div>
<p>sample based format with either continuous or integer values</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">print</span>(scoringutils<span class="op">::</span>integer_example_data, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co">## # A tibble: 6,000 x 6</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co">## # Groups:   id [30]</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">##       id model  true_value sample prediction horizon</span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">##    &lt;int&gt; &lt;chr&gt;       &lt;dbl&gt;  &lt;int&gt;      &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">##  1     1 model1          6      1          5       1</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">##  2     1 model1          6      2          4       1</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co">##  3     1 model1          6      3          3       1</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co">##  4     1 model1          6      4          3       1</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co">##  5     1 model1          6      5          4       1</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="co">##  6     1 model1          6      6          4       1</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co">##  7     1 model1          6      7          5       1</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">##  8     1 model1          6      8          4       1</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="co">##  9     1 model1          6      9          4       1</span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co">## 10     1 model1          6     10          6       1</span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co">## # … with 5,990 more rows</span></span>
<span id="cb10-18"><a href="#cb10-18"></a></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="kw">print</span>(scoringutils<span class="op">::</span>continuous_example_data, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb10-20"><a href="#cb10-20"></a></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="co">##       id  model  true_value sample   prediction horizon</span></span>
<span id="cb10-22"><a href="#cb10-22"></a><span class="co">##    1:  1 model1  0.03007379      1 -0.203426069       1</span></span>
<span id="cb10-23"><a href="#cb10-23"></a><span class="co">##    2:  1 model1  0.03007379      2  0.007621269       1</span></span>
<span id="cb10-24"><a href="#cb10-24"></a><span class="co">##    3:  1 model1  0.03007379      3 -2.086657003       1</span></span>
<span id="cb10-25"><a href="#cb10-25"></a><span class="co">##   ---                                                  </span></span>
<span id="cb10-26"><a href="#cb10-26"></a><span class="co">## 5998: 30 model2 -2.93749990     48 -0.079900522       2</span></span>
<span id="cb10-27"><a href="#cb10-27"></a><span class="co">## 5999: 30 model2 -2.93749990     49 -1.178524017       2</span></span>
<span id="cb10-28"><a href="#cb10-28"></a><span class="co">## 6000: 30 model2 -2.93749990     50  0.638750918       2</span></span></code></pre></div>
<p>forecasts in a binary format:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">print</span>(scoringutils<span class="op">::</span>binary_example_data, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="co">## # A tibble: 120 x 5</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co">## # Groups:   id, model [60]</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">##       id model  horizon prediction true_value</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co">##    &lt;int&gt; &lt;fct&gt;    &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co">##  1     1 model1       1    0.746            0</span></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="co">##  2     1 model1       2    0.522            0</span></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="co">##  3     1 model2       1    0.00958          0</span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co">##  4     1 model2       2    0.00671          0</span></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="co">##  5     2 model1       1    0.730            0</span></span>
<span id="cb11-12"><a href="#cb11-12"></a><span class="co">##  6     2 model1       2    0.511            0</span></span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="co">##  7     2 model2       1    0.0274           0</span></span>
<span id="cb11-14"><a href="#cb11-14"></a><span class="co">##  8     2 model2       2    0.0192           0</span></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="co">##  9     3 model1       1    0.543            0</span></span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="co">## 10     3 model1       2    0.380            0</span></span>
<span id="cb11-17"><a href="#cb11-17"></a><span class="co">## # … with 110 more rows</span></span></code></pre></div>
<p>It also offers functionality to convert between these formats. For more information have a look at the documentation of the following functions:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>scoringutils<span class="op">::</span><span class="kw">sample_to_quantile</span>() <span class="co"># convert from sample based to quantile format</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>scoringutils<span class="op">::</span><span class="kw">range_to_quantile</span>() <span class="co"># convert from range format to plain quantile</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>scoringutils<span class="op">::</span><span class="kw">quantile_to_range</span>() <span class="co"># convert the other way round</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>scoringutils<span class="op">::</span><span class="kw">quantile_to_long</span>() <span class="co"># convert range based format from wide to long</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>scoringutils<span class="op">::</span><span class="kw">quantile_to_wide</span>() <span class="co"># convert the other way round</span></span></code></pre></div>
</div>
</div>
<div id="scoring-forecasts-directly-using-lower-level-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#scoring-forecasts-directly-using-lower-level-functions" class="anchor"></a>Scoring Forecasts Directly Using Lower Level Functions</h2>
<p>Documentation will be added soon.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=scoringutils">https://​cloud.r-project.org/​package=scoringutils</a>
</li>
<li>Browse source code at <br><a href="https://github.com/epiforecasts/scoringutils/">https://​github.com/​epiforecasts/​scoringutils/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/epiforecasts/scoringutils/issues">https://​github.com/​epiforecasts/​scoringutils/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nikos Bosse <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/https://orcid.org/0000-0002-7750-5280" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Sam Abbott <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8057-8037" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Sebastian Funk <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/epiforecasts/scoringutils/actions"><img src="https://github.com/epiforecasts/scoringutils/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/epiforecasts/scoringutils/"><img src="https://codecov.io/gh/epiforecasts/scoringutils/branch/master/graphs/badge.svg" alt="codecov"></a></li>
<li><a href="https://CRAN.R-project.org/package=scoringutils"><img src="https://www.r-pkg.org/badges/version-ago/scoringutils" alt="CRAN_Release_Badge"></a></li>
<li><a href="https://github.com/epiforecasts/scoringutils"><img src="https://img.shields.io/badge/devel%20version-0.1.4-green.svg?style=flat" alt="develVersion"></a></li>
<li><a href="https://cran.r-project.org/package=scoringutils"><img src="http://cranlogs.r-pkg.org/badges/grand-total/scoringutils" alt="metacran downloads"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Nikos Bosse, Sam Abbott, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
